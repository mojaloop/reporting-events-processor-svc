<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<flowController encoding-version="1.4">
  <maxTimerDrivenThreadCount>10</maxTimerDrivenThreadCount>
  <maxEventDrivenThreadCount>1</maxEventDrivenThreadCount>
  <registries/>
  <parameterContexts/>
  <rootGroup>
    <id>e68af2b0-0192-1000-54e1-456745b78faf</id>
    <name>NiFi Flow</name>
    <position x="0.0" y="0.0"/>
    <comment/>
    <flowfileConcurrency>UNBOUNDED</flowfileConcurrency>
    <flowfileOutboundPolicy>STREAM_WHEN_AVAILABLE</flowfileOutboundPolicy>
    <defaultFlowFileExpiration>0 sec</defaultFlowFileExpiration>
    <defaultBackPressureObjectThreshold>10000</defaultBackPressureObjectThreshold>
    <defaultBackPressureDataSizeThreshold>1 GB</defaultBackPressureDataSizeThreshold>
    <logFileSuffix/>
    <processor>
      <id>01931000-2499-12a3-f16e-5c50cdca918e</id>
      <versionedComponentId>372de8e9-ad65-3f67-a747-2ca1fabdd483</versionedComponentId>
      <name>Save to Mongo db</name>
      <position x="5256.0" y="1392.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.mongodb.PutMongo</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-mongodb-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>mongo-client-service</name>
        <value>f58ceb00-0192-1000-456c-dfb46e071bcc</value>
      </property>
      <property>
        <name>Mongo URI</name>
      </property>
      <property>
        <name>Mongo Database Name</name>
        <value>${REPORTING_EVENTS_DB_DATABASE}</value>
      </property>
      <property>
        <name>Mongo Collection Name</name>
        <value>settlement</value>
      </property>
      <property>
        <name>ssl-context-service</name>
      </property>
      <property>
        <name>ssl-client-auth</name>
        <value>NONE</value>
      </property>
      <property>
        <name>Mode</name>
        <value>update</value>
      </property>
      <property>
        <name>Upsert</name>
        <value>true</value>
      </property>
      <property>
        <name>Update Query Key</name>
      </property>
      <property>
        <name>putmongo-update-query</name>
        <value>{ "settlementId": NumberLong(${settlementId}) }</value>
      </property>
      <property>
        <name>put-mongo-update-mode</name>
        <value>operators</value>
      </property>
      <property>
        <name>Write Concern</name>
        <value>ACKNOWLEDGED</value>
      </property>
      <property>
        <name>Character Set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f5918073-0192-1000-f006-d61f74adcebc</id>
      <versionedComponentId>8a57a868-7a9f-33d2-be8e-41519c2dbff6</versionedComponentId>
      <name>Query for transfer details</name>
      <position x="1088.0" y="520.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ExecuteSQL</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>10</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Database Connection Pooling Service</name>
        <value>f588b330-0192-1000-c3c2-5b6de011724a</value>
      </property>
      <property>
        <name>sql-pre-query</name>
      </property>
      <property>
        <name>SQL select query</name>
        <value>SELECT 
    transfer.transferId as transferId, 
    q.transactionReferenceId as transactionId, 
    ft.sourceAmount as sourceAmount, 
    ft.sourceCurrency as sourceCurrency, 
    ft.targetAmount as targetAmount, 
    ft.targetCurrency as targetCurrency,  
    transfer.createdDate as createdAt, 
    transfer.amount as amount,  
    transfer.currencyId AS currency,
    tsc.transferStateId AS transferStateChangeState,
    tsc.reason AS transferStateChangeReason,
    tsc.createdDate AS transferStateChangeDateTime,
    ts2.name as transactionType,
    te.errorCode as errorCode, 
    CASE 
	    WHEN da.isProxy = 0 THEN da.name 
	    ELSE ep1.name
	END as payerDFSP,
    CASE 
	    WHEN da.isProxy = 1 THEN da.name 
	    ELSE NULL 
	END as payerDFSPProxy,
    CASE 
	    WHEN ca.isProxy = 0 THEN ca.name 
	    ELSE ep2.name
	END as payeeDFSP,
    CASE 
	    WHEN ca.isProxy = 1 THEN ca.name 
	    ELSE NULL 
	END as payeeDFSPProxy,
    payerpit.name as payerPartyIdType,
    qp1.partyIdentifierValue as payerPartyIdentifier,
    qp1.partyName as payerPartyName,
    payeepit.name as payeePartyIdType,
    qp2.partyIdentifierValue as payeePartyIdentifier,
    qp2.partyName as payeePartyName, 
    qr.quoteId as quoteId,
    at2.name as quoteRequestAmountType,
    q.currencyId as quoteRequestCurrency,
    q.amount as quoteRequestAmount,
    qr.transferAmount as transferTermsTransferAmount,
    qr.transferAmountCurrencyId as transferTermsTransferCurrency,
    qr.payeeReceiveAmountCurrencyId as transferTermsPayeeReceiveCurrency,
    qr.payeeReceiveAmount as transferTermsPayeeReceiveAmount,
    qr.payeeFspFeeAmount as transferTermsPayeeFspFeeAmount,
    qr.payeeFspFeeCurrencyId as transferTermsPayeeFspFeeCurrency, 
    qr.payeeFspCommissionCurrencyId as transferTermsPayeeFspCommissionCurrency,
    qr.payeeFspCommissionAmount as transferTermsPayeeFspCommissionAmount,
    qr.responseExpirationDate as transferTermsExpiration,
    ilpp.value as ilpPacket,
    pa.name as positionChangesParticipantName,
    pc3.currencyId as positionChangesCurrency,
    lat.name as positionChangesLedgerType,
    ppc.createdDate as positionChangesDateTime,
    ppc.value as positionChangesUpdatedValue,
    ppc.change as positionChangesChange,
    tf.settlementWindowId as transferSettlementWindowId,
    gc.latitude as geoCodeLatitude, 
    gc.longitude as geoCodeLongitude,
	CASE 
        WHEN q.transactionRequestId IS NULL AND ft.commitRequestId IS NOT NULL THEN 'P2P WITH FX'
        WHEN q.transactionRequestId IS NULL THEN 'P2P'
        ELSE 'R2P'
    END AS baseUseCase
FROM transfer
    INNER JOIN transferParticipant AS tp1 ON tp1.transferId = transfer.transferId
    LEFT JOIN externalParticipant AS ep1 ON ep1.externalParticipantId = tp1.externalParticipantId
    INNER JOIN transferParticipantRoleType AS tprt1 ON tprt1.transferParticipantRoleTypeId = tp1.transferParticipantRoleTypeId
    INNER JOIN participant AS da ON da.participantId = tp1.participantId
    LEFT JOIN participantCurrency AS pc1 ON pc1.participantCurrencyId = tp1.participantCurrencyId
    INNER JOIN transferParticipant AS tp2 ON tp2.transferId = transfer.transferId
    LEFT JOIN externalParticipant AS ep2 ON ep2.externalParticipantId = tp2.externalParticipantId
    INNER JOIN transferParticipantRoleType AS tprt2 ON tprt2.transferParticipantRoleTypeId = tp2.transferParticipantRoleTypeId
    INNER JOIN participant AS ca ON ca.participantId = tp2.participantId
    LEFT JOIN participantCurrency AS pc2 ON pc2.participantCurrencyId = tp2.participantCurrencyId
    INNER JOIN ilpPacket AS ilpp ON ilpp.transferId = transfer.transferId
    LEFT JOIN transferStateChange AS tsc ON tsc.transferId = transfer.transferId
    	AND tsc.transferStateChangeId = (
            SELECT MAX(transferStateChangeId) from transferStateChange tsctmp where tsctmp.transferId = transfer.transferId
        )
    LEFT JOIN transferState AS ts ON ts.transferStateId = tsc.transferStateId
    LEFT JOIN transferFulfilment AS tf ON tf.transferId = transfer.transferId
    LEFT JOIN transferError AS te ON te.transferId = transfer.transferId
    LEFT JOIN fxTransfer AS ft ON ft.determiningTransferId = transfer.transferId 
    INNER JOIN quote AS q ON q.transactionReferenceId = transfer.transferId 
    INNER JOIN transactionScenario AS ts2 ON ts2.transactionScenarioId = q.transactionScenarioId 
    INNER JOIN quoteParty AS qp1 ON q.quoteId = qp1.quoteId AND qp1.partyTypeId = tprt1.transferParticipantRoleTypeId
    INNER JOIN quoteParty AS qp2 ON q.quoteId = qp2.quoteId AND qp2.partyTypeId = tprt2.transferParticipantRoleTypeId 
    INNER JOIN partyIdentifierType AS payerpit ON payerpit.partyIdentifierTypeId = qp1.partyIdentifierTypeId
    INNER JOIN partyIdentifierType AS payeepit ON payeepit.partyIdentifierTypeId = qp2.partyIdentifierTypeId
    INNER JOIN quoteResponse AS qr ON qr.quoteId = q.quoteId 
    INNER JOIN amountType at2 ON q.amountTypeId = at2.amountTypeId 
    LEFT JOIN participantPositionChange ppc ON ppc.transferStateChangeId = tsc.transferStateChangeId 
    LEFT JOIN participantCurrency pc3 on pc3.participantCurrencyId = ppc.participantCurrencyId 
	LEFT JOIN participant pa on pa.participantId = pc3.participantId 
	LEFT JOIN ledgerAccountType lat on lat.ledgerAccountTypeId = pc3.ledgerAccountTypeId 
	LEFT JOIN geoCode gc ON gc.quotePartyId = qp2.quotePartyId
WHERE 
    transfer.transferId IN (${transferIds})
    AND tprt1.name = 'PAYER_DFSP'
    AND tprt2.name = 'PAYEE_DFSP';</value>
      </property>
      <property>
        <name>sql-post-query</name>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>0 seconds</value>
      </property>
      <property>
        <name>dbf-normalize</name>
        <value>false</value>
      </property>
      <property>
        <name>dbf-user-logical-types</name>
        <value>false</value>
      </property>
      <property>
        <name>compression-format</name>
        <value>NONE</value>
      </property>
      <property>
        <name>dbf-default-precision</name>
        <value>10</value>
      </property>
      <property>
        <name>dbf-default-scale</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-max-rows</name>
        <value>1</value>
      </property>
      <property>
        <name>esql-output-batch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-fetch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-auto-commit</name>
        <value>true</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>620b1d25-0193-1000-894b-ceda08a2cff7</id>
      <versionedComponentId>1baf2ad1-8531-364a-93f2-4df6c9fe3a76</versionedComponentId>
      <name>Check if transferId is null or not</name>
      <position x="1088.0" y="1040.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.RouteOnAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Routing Strategy</name>
        <value>Route to Property name</value>
      </property>
      <property>
        <name>transferId not present</name>
        <value>${transferId:isEmpty()}</value>
      </property>
      <property>
        <name>transferId is present</name>
        <value>${transferId:trim():length():gt(0)}</value>
      </property>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-84ad-1e36-4085-a8919ceae988</id>
      <versionedComponentId>28b48572-24c8-394f-96d7-ff2157355911</versionedComponentId>
      <name>Payee conversion mongo query</name>
      <position x="3192.0" y="1504.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ReplaceText</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Replacement Strategy</name>
        <value>Regex Replace</value>
      </property>
      <property>
        <name>Regular Expression</name>
        <value>(?s)(^.*$)</value>
      </property>
      <property>
        <name>Replacement Value</name>
        <value>{
  "$set": {
	"transferId": "${transferId}",
	"conversions.payee.counterPartyProxy": "${counterPartyProxy}",
    "conversions.payee.conversionRequestId": "${conversionRequestId}",
	"conversions.payee.conversionId": "${conversionId}",
    "conversions.payee.conversionCommitRequestId": "${conversionCommitRequestId}",
    "conversions.payee.conversionState": "${conversionState}",
    "conversions.payee.counterPartyFSP": "${counterPartyFsp}",
    "conversions.payee.conversionType": "${conversionType}",
    "conversions.payee.conversionSettlementWindowId": NumberLong(${conversionSettlementWindowId}),
    "conversions.payee.conversionTerms.conversionId": "${conversionTermsConversionId}",
    "conversions.payee.conversionTerms.determiningTransferId": "${conversionTermsDeterminingTransferId}",
    "conversions.payee.conversionTerms.initiatingFsp": "${conversionTermsInitiatingFsp}",
    "conversions.payee.conversionTerms.counterPartyFsp": "${conversionTermsCounterPartyFsp}",
    "conversions.payee.conversionTerms.amountType": "${conversionTermsAmountType}",
    "conversions.payee.conversionTerms.sourceAmount.currency": "${conversionTermsSourceCurrency}",
    "conversions.payee.conversionTerms.sourceAmount.amount": ${conversionTermsSourceAmount},
    "conversions.payee.conversionTerms.targetAmount.currency": "${conversionTermsTargetCurrency}",
    "conversions.payee.conversionTerms.targetAmount.amount": ${conversionTermsTargetAmount},
    "conversions.payee.conversionTerms.expiration": {
			"$date": "${conversionTermsExpiration:trim()}"
	  },
    "conversions.payee.conversionTerms.ilpPacket": "${ilpPacket}"
  },
  "$push": {
    "conversions.payee.conversionStateChanges": {
      "conversionState": "${conversionStateChangesState}",
      "dateTime": {
			"$date": "${conversionStateChangesDateTime:trim()}" 
		},
      "reason": "${conversionStateChangesReason}"
    }
  }
}

</value>
      </property>
      <property>
        <name>Text to Prepend</name>
      </property>
      <property>
        <name>Text to Append</name>
      </property>
      <property>
        <name>Character Set</name>
        <value>UTF-8</value>
      </property>
      <property>
        <name>Maximum Buffer Size</name>
        <value>1 MB</value>
      </property>
      <property>
        <name>Evaluation Mode</name>
        <value>Line-by-Line</value>
      </property>
      <property>
        <name>Line-by-Line Evaluation Mode</name>
        <value>All</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>6245b3ab-0193-1000-cdb4-3265924892f4</id>
      <versionedComponentId>cb153fe9-365c-3943-8e92-69a4dd0c0bbc</versionedComponentId>
      <name>LogAttribute</name>
      <position x="2976.0" y="2056.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.LogAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Log Level</name>
        <value>info</value>
      </property>
      <property>
        <name>Log Payload</name>
        <value>false</value>
      </property>
      <property>
        <name>Attributes to Log</name>
      </property>
      <property>
        <name>attributes-to-log-regex</name>
        <value>.*</value>
      </property>
      <property>
        <name>Attributes to Ignore</name>
      </property>
      <property>
        <name>attributes-to-ignore-regex</name>
      </property>
      <property>
        <name>Log FlowFile Properties</name>
        <value>true</value>
      </property>
      <property>
        <name>Output Format</name>
        <value>Line per Attribute</value>
      </property>
      <property>
        <name>Log prefix</name>
      </property>
      <property>
        <name>character-set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>48ad85c2-0193-1000-744f-ad134b45b3f0</id>
      <versionedComponentId>bac9c61c-7172-3194-8085-60ce79c2e50c</versionedComponentId>
      <name>Extract transferId</name>
      <position x="3624.0" y="1112.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.EvaluateJsonPath</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Destination</name>
        <value>flowfile-attribute</value>
      </property>
      <property>
        <name>Return Type</name>
        <value>auto-detect</value>
      </property>
      <property>
        <name>Path Not Found Behavior</name>
        <value>ignore</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <property>
        <name>transferId</name>
        <value>$[0].determiningTransferId</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-ac12-12aa-7c8e-3180e1549684</id>
      <versionedComponentId>6f64e096-a2d6-37e1-a978-a8dc4686465c</versionedComponentId>
      <name>Convert date to mongo date format</name>
      <position x="5256.0" y="992.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.attributes.UpdateAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-update-attribute-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Delete Attributes Expression</name>
      </property>
      <property>
        <name>Store State</name>
        <value>Do not store state</value>
      </property>
      <property>
        <name>Stateful Variables Initial Value</name>
      </property>
      <property>
        <name>canonical-value-lookup-cache-size</name>
        <value>100</value>
      </property>
      <property>
        <name>lastUpdated</name>
        <value>${lastUpdated:toDate("yyyy-MM-dd HH:mm:ss.S"):format("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", "UTC")}
</value>
      </property>
      <property>
        <name>createdAt</name>
        <value>${createdAt:toDate("yyyy-MM-dd HH:mm:ss.S"):format("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", "UTC")}
</value>
      </property>
    </processor>
    <processor>
      <id>52a32499-0193-1000-d558-6b2fa0cc4081</id>
      <versionedComponentId>9e2c0b78-e63b-36ad-8399-b5bd1077d996</versionedComponentId>
      <name>Save to MongoDB</name>
      <position x="2976.0" y="1856.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.mongodb.PutMongo</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-mongodb-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>mongo-client-service</name>
        <value>f58ceb00-0192-1000-456c-dfb46e071bcc</value>
      </property>
      <property>
        <name>Mongo URI</name>
      </property>
      <property>
        <name>Mongo Database Name</name>
        <value>${REPORTING_EVENTS_DB_DATABASE}</value>
      </property>
      <property>
        <name>Mongo Collection Name</name>
        <value>transaction</value>
      </property>
      <property>
        <name>ssl-context-service</name>
      </property>
      <property>
        <name>ssl-client-auth</name>
        <value>NONE</value>
      </property>
      <property>
        <name>Mode</name>
        <value>update</value>
      </property>
      <property>
        <name>Upsert</name>
        <value>true</value>
      </property>
      <property>
        <name>Update Query Key</name>
      </property>
      <property>
        <name>putmongo-update-query</name>
        <value>{ "transferId": "${transferId}" }</value>
      </property>
      <property>
        <name>put-mongo-update-mode</name>
        <value>operators</value>
      </property>
      <property>
        <name>Write Concern</name>
        <value>ACKNOWLEDGED</value>
      </property>
      <property>
        <name>Character Set</name>
        <value>UTF-8</value>
      </property>
    </processor>
    <processor>
      <id>61dee536-0193-1000-6ed7-bdc5ae5e0bf3</id>
      <versionedComponentId>07155e5a-06a3-3e23-859e-bd7fc97aa251</versionedComponentId>
      <name>Payer side / Payee side conversion</name>
      <position x="2976.0" y="1264.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.RouteOnAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Routing Strategy</name>
        <value>Route to Property name</value>
      </property>
      <property>
        <name>payee</name>
        <value>${conversionType:equals('PAYEE_CONVERSION')}</value>
      </property>
      <property>
        <name>payer</name>
        <value>${conversionType:equals('PAYER_CONVERSION')}</value>
      </property>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f58d4e7c-0192-1000-5bf7-bd6192bed4fa</id>
      <versionedComponentId>0150a67c-4d91-31f6-82c9-90f7ea4365eb</versionedComponentId>
      <name>transferStateChange fetch</name>
      <position x="1088.0" y="-312.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.QueryDatabaseTable</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>1 min</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>PRIMARY</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Database Connection Pooling Service</name>
        <value>f588b330-0192-1000-c3c2-5b6de011724a</value>
      </property>
      <property>
        <name>db-fetch-db-type</name>
        <value>MySQL</value>
      </property>
      <property>
        <name>Table Name</name>
        <value>transferStateChange</value>
      </property>
      <property>
        <name>Columns to Return</name>
        <value>transferStateChangeId, transferId, transferStateId</value>
      </property>
      <property>
        <name>db-fetch-where-clause</name>
      </property>
      <property>
        <name>db-fetch-sql-query</name>
      </property>
      <property>
        <name>Maximum-value Columns</name>
        <value>transferStateChangeId</value>
      </property>
      <property>
        <name>initial-load-strategy</name>
        <value>Start at Beginning</value>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>0 seconds</value>
      </property>
      <property>
        <name>Fetch Size</name>
        <value>0</value>
      </property>
      <property>
        <name>Set Auto Commit</name>
      </property>
      <property>
        <name>qdbt-max-rows</name>
        <value>20</value>
      </property>
      <property>
        <name>qdbt-output-batch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>qdbt-max-frags</name>
        <value>0</value>
      </property>
      <property>
        <name>dbf-normalize</name>
        <value>false</value>
      </property>
      <property>
        <name>transaction-isolation-level</name>
      </property>
      <property>
        <name>dbf-user-logical-types</name>
        <value>false</value>
      </property>
      <property>
        <name>dbf-default-precision</name>
        <value>10</value>
      </property>
      <property>
        <name>dbf-default-scale</name>
        <value>0</value>
      </property>
    </processor>
    <processor>
      <id>624f9e04-0193-1000-56f1-485b6f4cbf8b</id>
      <versionedComponentId>5ff9c33b-b916-3213-b568-85a1c6424e4f</versionedComponentId>
      <name>LogAttribute</name>
      <position x="4064.0" y="1288.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.LogAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Log Level</name>
        <value>info</value>
      </property>
      <property>
        <name>Log Payload</name>
        <value>false</value>
      </property>
      <property>
        <name>Attributes to Log</name>
      </property>
      <property>
        <name>attributes-to-log-regex</name>
        <value>.*</value>
      </property>
      <property>
        <name>Attributes to Ignore</name>
      </property>
      <property>
        <name>attributes-to-ignore-regex</name>
      </property>
      <property>
        <name>Log FlowFile Properties</name>
        <value>true</value>
      </property>
      <property>
        <name>Output Format</name>
        <value>Line per Attribute</value>
      </property>
      <property>
        <name>Log prefix</name>
      </property>
      <property>
        <name>character-set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>2a4db2cd-0193-1000-c5c0-1f946dff6dff</id>
      <versionedComponentId>93a9b50a-2ac7-3e4a-a306-72fc429c871f</versionedComponentId>
      <name>Sql query to get conversion</name>
      <position x="2976.0" y="448.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ExecuteSQL</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Database Connection Pooling Service</name>
        <value>f588b330-0192-1000-c3c2-5b6de011724a</value>
      </property>
      <property>
        <name>sql-pre-query</name>
      </property>
      <property>
        <name>SQL select query</name>
        <value>SELECT 
ft.determiningTransferId as transferId,
fqct.conversionRequestId as conversionRequestId, 
fqct.conversionId as conversionId , 
ft.commitRequestId as conversionCommitRequestId,  
ftsc.transferStateId as conversionState,
ftf.settlementWindowId as conversionSettlementWindowId,
fqrct.conversionId as conversionTermsConversionId,
fqrct.determiningTransferId as conversionTermsDeterminingTransferId,
fqrct.initiatingFsp as conversionTermsInitiatingFsp,
fqrct.counterPartyFsp as conversionTermsCounterPartyFsp,
at2.name as conversionTermsAmountType,
fqrct.sourceAmount as conversionTermsSourceAmount,
fqrct.sourceCurrency as conversionTermsSourceCurrency,
fqrct.targetAmount as conversionTermsTargetAmount,
fqrct.targetCurrency as conversionTermsTargetCurrency,
fqrct.expirationDate as conversionTermsExpiration,
ftsc.transferStateId as conversionStateChangesState,
ftsc.reason as conversionStateChangesReason,
ftsc.createdDate as conversionStateChangesDateTime,
ip.value as ilpPacket,
ftt.name as conversionType,
CASE 
	WHEN cp.isProxy = 1 THEN cp.name 
	ELSE NULL
END as counterPartyProxy,
CASE 
	WHEN cp.isProxy = 0 THEN cp.name
	ELSE ep.name
END as counterPartyFsp
FROM fxTransfer ft 
JOIN fxQuoteConversionTerms fqct on fqct.conversionId = ft.commitRequestId 
JOIN fxQuoteResponseConversionTerms fqrct on fqrct.conversionId = ft.commitRequestId 
JOIN fxTransferStateChange ftsc on ftsc.commitRequestId = ft.commitRequestId 
LEFT JOIN fxTransferFulfilment ftf on ftf.commitRequestId = ft.commitRequestId 
JOIN ilpPacket ip on ip.transferId = ft.determiningTransferId 
JOIN amountType at2 on at2.amountTypeId = fqrct.amountTypeId 
LEFT JOIN fxWatchList fwl on fwl.commitRequestId = ft.commitRequestId 
JOIN fxTransferType ftt on fwl.fxTransferTypeId = ftt.fxTransferTypeId 
JOIN fxTransferParticipant ftp ON ftp.commitRequestId = ft.commitRequestId 
LEFT JOIN externalParticipant ep ON ftp.externalParticipantId = ep.externalParticipantId 
INNER JOIN participant AS cp ON cp.participantId = ftp.participantId 
INNER JOIN transferParticipantRoleType ftprt ON ftprt.transferParticipantRoleTypeId = ftp.transferParticipantRoleTypeId 
WHERE
	ftprt.name = 'COUNTER_PARTY_FSP'
AND ft.commitRequestId = "${commitRequestId}"
AND ftsc.fxTransferStateChangeId = "${fxTransferStateChangeId}"
LIMIT 1;</value>
      </property>
      <property>
        <name>sql-post-query</name>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>0 seconds</value>
      </property>
      <property>
        <name>dbf-normalize</name>
        <value>false</value>
      </property>
      <property>
        <name>dbf-user-logical-types</name>
        <value>false</value>
      </property>
      <property>
        <name>compression-format</name>
        <value>NONE</value>
      </property>
      <property>
        <name>dbf-default-precision</name>
        <value>10</value>
      </property>
      <property>
        <name>dbf-default-scale</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-max-rows</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-output-batch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-fetch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-auto-commit</name>
        <value>true</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-b2cd-1a4d-9973-b2157635765e</id>
      <versionedComponentId>019e65b9-cfbb-3704-8eb8-fb8082f963d5</versionedComponentId>
      <name>Query to get settlementWindow details</name>
      <position x="5256.0" y="512.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ExecuteSQL</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Database Connection Pooling Service</name>
        <value>f588b330-0192-1000-c3c2-5b6de011724a</value>
      </property>
      <property>
        <name>sql-pre-query</name>
      </property>
      <property>
        <name>SQL select query</name>
        <value>SELECT 
s.settlementId as settlementId ,
s.createdDate as createdAt,
ssc.createdDate as lastUpdated,
ssc.settlementStateId as settlementStatus,
sm.name as settlementModel,
ssc.reason as reason ,
ssw.settlementWindowId as settlementWindowId
FROM 
settlementStateChange ssc 
JOIN settlement s ON s.settlementId = ssc.settlementId 
JOIN settlementModel sm ON sm.settlementModelId = s.settlementModelId 
JOIN settlementSettlementWindow ssw on ssw.settlementId = s.settlementId 
WHERE 
ssc.settlementStateId = "${settlementStateId}"
AND ssc.settlementId = ${settlementId}</value>
      </property>
      <property>
        <name>sql-post-query</name>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>0 seconds</value>
      </property>
      <property>
        <name>dbf-normalize</name>
        <value>false</value>
      </property>
      <property>
        <name>dbf-user-logical-types</name>
        <value>false</value>
      </property>
      <property>
        <name>compression-format</name>
        <value>NONE</value>
      </property>
      <property>
        <name>dbf-default-precision</name>
        <value>10</value>
      </property>
      <property>
        <name>dbf-default-scale</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-max-rows</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-output-batch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-fetch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-auto-commit</name>
        <value>true</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f591e0ed-0192-1000-4a4c-13e5444104d7</id>
      <versionedComponentId>9b017620-b05b-319f-89f9-f708dd8aede9</versionedComponentId>
      <name>ConvertAvroToJSON</name>
      <position x="1088.0" y="704.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.avro.ConvertAvroToJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-avro-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JSON container options</name>
        <value>array</value>
      </property>
      <property>
        <name>Wrap Single Record</name>
        <value>false</value>
      </property>
      <property>
        <name>Avro schema</name>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-ad1a-1e35-58b0-b886a20dbd54</id>
      <versionedComponentId>30d5df1b-42e4-3ee3-8cab-ed72c5b5f195</versionedComponentId>
      <name>ConvertAvroToJSON</name>
      <position x="5256.0" y="664.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.avro.ConvertAvroToJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-avro-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JSON container options</name>
        <value>array</value>
      </property>
      <property>
        <name>Wrap Single Record</name>
        <value>false</value>
      </property>
      <property>
        <name>Avro schema</name>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f58fd9cf-0192-1000-2c8d-4b913d14739c</id>
      <versionedComponentId>2614a6d8-b60c-361c-881a-de3533c3f949</versionedComponentId>
      <name>ConvertAvroToJSON</name>
      <position x="1088.0" y="-160.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.avro.ConvertAvroToJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-avro-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>5</retryCount>
      <backoffMechanism>YIELD_PROCESSOR</backoffMechanism>
      <maxBackoffPeriod>3 mins</maxBackoffPeriod>
      <retriedRelationship>failure</retriedRelationship>
      <property>
        <name>JSON container options</name>
        <value>array</value>
      </property>
      <property>
        <name>Wrap Single Record</name>
        <value>false</value>
      </property>
      <property>
        <name>Avro schema</name>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f6243042-0192-1000-ca84-f115b36b1ba5</id>
      <versionedComponentId>af550e6d-86fe-3ac5-a6be-d00c7d4a762f</versionedComponentId>
      <name>ConvertAvroToJSON</name>
      <position x="2976.0" y="-16.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.avro.ConvertAvroToJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-avro-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JSON container options</name>
        <value>array</value>
      </property>
      <property>
        <name>Wrap Single Record</name>
        <value>false</value>
      </property>
      <property>
        <name>Avro schema</name>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931003-ac12-12aa-b079-eac8f15e0ecf</id>
      <versionedComponentId>6b7f878d-b608-3337-b352-01c24485e3bf</versionedComponentId>
      <name>SettlementStateChange Fetch</name>
      <position x="5256.0" y="-104.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.QueryDatabaseTable</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>1 min</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>PRIMARY</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Database Connection Pooling Service</name>
        <value>f588b330-0192-1000-c3c2-5b6de011724a</value>
      </property>
      <property>
        <name>db-fetch-db-type</name>
        <value>MySQL</value>
      </property>
      <property>
        <name>Table Name</name>
        <value>settlementStateChange</value>
      </property>
      <property>
        <name>Columns to Return</name>
        <value>settlementStateChangeId, settlementId, settlementStateId</value>
      </property>
      <property>
        <name>db-fetch-where-clause</name>
      </property>
      <property>
        <name>db-fetch-sql-query</name>
      </property>
      <property>
        <name>Maximum-value Columns</name>
        <value>settlementStateChangeId</value>
      </property>
      <property>
        <name>initial-load-strategy</name>
        <value>Start at Beginning</value>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>0 seconds</value>
      </property>
      <property>
        <name>Fetch Size</name>
        <value>0</value>
      </property>
      <property>
        <name>Set Auto Commit</name>
      </property>
      <property>
        <name>qdbt-max-rows</name>
        <value>0</value>
      </property>
      <property>
        <name>qdbt-output-batch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>qdbt-max-frags</name>
        <value>0</value>
      </property>
      <property>
        <name>dbf-normalize</name>
        <value>false</value>
      </property>
      <property>
        <name>transaction-isolation-level</name>
      </property>
      <property>
        <name>dbf-user-logical-types</name>
        <value>false</value>
      </property>
      <property>
        <name>dbf-default-precision</name>
        <value>10</value>
      </property>
      <property>
        <name>dbf-default-scale</name>
        <value>0</value>
      </property>
    </processor>
    <processor>
      <id>434bfabb-0193-1000-0507-ed29208424e3</id>
      <versionedComponentId>42097830-aff6-3f67-bc59-a75551acaf3b</versionedComponentId>
      <name>Convert dates to mongo date format</name>
      <position x="864.0" y="1232.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.attributes.UpdateAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-update-attribute-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Delete Attributes Expression</name>
      </property>
      <property>
        <name>Store State</name>
        <value>Do not store state</value>
      </property>
      <property>
        <name>Stateful Variables Initial Value</name>
      </property>
      <property>
        <name>canonical-value-lookup-cache-size</name>
        <value>100</value>
      </property>
      <property>
        <name>positionChangesDateTime</name>
        <value>${positionChangesDateTime:isEmpty():ifElse('', ${positionChangesDateTime:toDate("yyyy-MM-dd HH:mm:ss.S"):format("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", "UTC")})}</value>
      </property>
      <property>
        <name>transferTermsExpiration</name>
        <value>${transferTermsExpiration:toDate("yyyy-MM-dd HH:mm:ss.S"):format("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", "UTC")}
</value>
      </property>
      <property>
        <name>transferStateChangeDateTime</name>
        <value>${transferStateChangeDateTime:toDate("yyyy-MM-dd HH:mm:ss.S"):format("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", "UTC")}
</value>
      </property>
      <property>
        <name>createdAt</name>
        <value>${createdAt:toDate("yyyy-MM-dd HH:mm:ss.S"):format("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", "UTC")}
</value>
      </property>
    </processor>
    <processor>
      <id>52627e14-0193-1000-57c9-8596f6dc70f9</id>
      <versionedComponentId>5dff75f4-4f76-3d17-adaa-cf32e35741bc</versionedComponentId>
      <name>ExecuteScript</name>
      <position x="3624.0" y="1648.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.script.ExecuteScript</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-scripting-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Script Engine</name>
        <value>Groovy</value>
      </property>
      <property>
        <name>Script File</name>
      </property>
      <property>
        <name>Script Body</name>
        <value>import org.apache.nifi.processor.io.StreamCallback
import groovy.json.JsonSlurper
import groovy.json.JsonOutput

// StreamCallback to read and write flowfile content
class UpdateChargesCallback implements StreamCallback {
    String conversionType

    UpdateChargesCallback(String conversionType) {
        this.conversionType = conversionType
    }

    @Override
    void process(InputStream inputStream, OutputStream outputStream) throws IOException {
        // Read flowfile content
        def input = inputStream.getText("UTF-8")
        def jsonSlurper = new JsonSlurper()
        def chargesData = jsonSlurper.parseText(input) // Parse input JSON as an array or object

        // Determine mapping target based on 'conversionType' attribute
        def targetKey = ""
        if (conversionType == "PAYER_CONVERSION") {
            targetKey = "conversions.payer.conversionTerms.charges"
        } else if (conversionType == "PAYEE_CONVERSION") {
            targetKey = "conversions.payee.conversionTerms.charges"
        } else {
            throw new IllegalArgumentException("Unknown conversionType: ${conversionType}")
        }

        // Iterate over charges and typecast 'amount' fields to numbers
        chargesData.charges.each { charge -&gt;
            if (charge.sourceAmount?.amount) {
                charge.sourceAmount.amount = charge.sourceAmount.amount.toBigDecimal()
            }
            if (charge.targetAmount?.amount) {
                charge.targetAmount.amount = charge.targetAmount.amount.toBigDecimal()
            }
        }

        // Prepare MongoDB $set query with the typecasted array
        def mongoQuery = [
            '$set': [
                (targetKey): chargesData.charges
            ]
        ]

        // Write transformed JSON query to flowfile
        def output = JsonOutput.toJson(mongoQuery)
        outputStream.write(output.getBytes("UTF-8"))
    }
}

// Execute the script
flowFile = session.get()
if (flowFile) {
    try {
        // Retrieve the 'conversionType' attribute from the flowfile
        def conversionType = flowFile.getAttribute("conversionType")

        // Pass the conversionType to the StreamCallback
        flowFile = session.write(flowFile, new UpdateChargesCallback(conversionType))
        session.transfer(flowFile, REL_SUCCESS)
    } catch (Exception e) {
        flowFile = session.putAttribute(flowFile, "script.error.message", e.message)
        session.transfer(flowFile, REL_FAILURE)
    }
}
</value>
      </property>
      <property>
        <name>Module Directory</name>
      </property>
    </processor>
    <processor>
      <id>2e35ad1a-0193-1000-577c-3e72a0f49fcb</id>
      <versionedComponentId>b5523e18-5903-3b60-8948-bf15433bcfce</versionedComponentId>
      <name>ConvertAvroToJSON</name>
      <position x="2976.0" y="600.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.avro.ConvertAvroToJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-avro-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JSON container options</name>
        <value>array</value>
      </property>
      <property>
        <name>Wrap Single Record</name>
        <value>false</value>
      </property>
      <property>
        <name>Avro schema</name>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>2e360734-0193-1000-c49b-9875fe7d5eab</id>
      <versionedComponentId>851e5552-db84-37bc-8cb6-82d7c1783e27</versionedComponentId>
      <name>Extract values to set</name>
      <position x="2976.0" y="784.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.EvaluateJsonPath</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Destination</name>
        <value>flowfile-attribute</value>
      </property>
      <property>
        <name>Return Type</name>
        <value>auto-detect</value>
      </property>
      <property>
        <name>Path Not Found Behavior</name>
        <value>ignore</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <property>
        <name>conversionTermsSourceCurrency</name>
        <value>$['conversionTermsSourceCurrency']</value>
      </property>
      <property>
        <name>conversionStateChangesReason</name>
        <value>$['conversionStateChangesReason']</value>
      </property>
      <property>
        <name>conversionType</name>
        <value>$['conversionType']</value>
      </property>
      <property>
        <name>conversionTermsTargetCurrency</name>
        <value>$['conversionTermsTargetCurrency']</value>
      </property>
      <property>
        <name>counterPartyProxy</name>
        <value>$['counterPartyProxy']</value>
      </property>
      <property>
        <name>conversionTermsSourceAmount</name>
        <value>$['conversionTermsSourceAmount']</value>
      </property>
      <property>
        <name>conversionStateChangesDateTime</name>
        <value>$['conversionStateChangesDateTime']</value>
      </property>
      <property>
        <name>conversionState</name>
        <value>$['conversionState']</value>
      </property>
      <property>
        <name>conversionTermsDeterminingTransferId</name>
        <value>$['conversionTermsDeterminingTransferId']</value>
      </property>
      <property>
        <name>counterPartyFsp</name>
        <value>$['counterPartyFsp']</value>
      </property>
      <property>
        <name>conversionRequestId</name>
        <value>$['conversionRequestId']</value>
      </property>
      <property>
        <name>ilpPacket</name>
        <value>$['ilpPacket']</value>
      </property>
      <property>
        <name>conversionCommitRequestId</name>
        <value>$['conversionCommitRequestId']</value>
      </property>
      <property>
        <name>conversionTermsCounterPartyFsp</name>
        <value>$['conversionTermsCounterPartyFsp']</value>
      </property>
      <property>
        <name>conversionTermsTargetAmount</name>
        <value>$['conversionTermsTargetAmount']</value>
      </property>
      <property>
        <name>conversionTermsAmountType</name>
        <value>$['conversionTermsAmountType']</value>
      </property>
      <property>
        <name>transferId</name>
        <value>$['transferId']</value>
      </property>
      <property>
        <name>conversionTermsInitiatingFsp</name>
        <value>$['conversionTermsInitiatingFsp']</value>
      </property>
      <property>
        <name>conversionStateChangesState</name>
        <value>$['conversionStateChangesState']</value>
      </property>
      <property>
        <name>conversionTermsConversionId</name>
        <value>$['conversionTermsConversionId']</value>
      </property>
      <property>
        <name>conversionSettlementWindowId</name>
        <value>$['conversionSettlementWindowId']</value>
      </property>
      <property>
        <name>conversionId</name>
        <value>$['conversionId']</value>
      </property>
      <property>
        <name>conversionTermsExpiration</name>
        <value>$['conversionTermsExpiration']</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931004-ac12-12aa-6624-a9bec3e58bf2</id>
      <versionedComponentId>9d72faaf-d62b-3769-9ba3-3376f2cb10a6</versionedComponentId>
      <name>Extract settlementId and settlementState</name>
      <position x="5256.0" y="352.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.EvaluateJsonPath</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Destination</name>
        <value>flowfile-attribute</value>
      </property>
      <property>
        <name>Return Type</name>
        <value>auto-detect</value>
      </property>
      <property>
        <name>Path Not Found Behavior</name>
        <value>ignore</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <property>
        <name>settlementId</name>
        <value>$['settlementId']</value>
      </property>
      <property>
        <name>settlementStateId</name>
        <value>$['settlementStateId']</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931001-ac12-12aa-d6cb-9b12b5cee966</id>
      <versionedComponentId>4e17f7b6-ceef-300f-a771-01ace12c4433</versionedComponentId>
      <name>ConvertAvroToJSON</name>
      <position x="5256.0" y="48.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.avro.ConvertAvroToJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-avro-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JSON container options</name>
        <value>array</value>
      </property>
      <property>
        <name>Wrap Single Record</name>
        <value>false</value>
      </property>
      <property>
        <name>Avro schema</name>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-69c4-18ac-5390-7fda5ef6f8fb</id>
      <versionedComponentId>bcb017ab-1eaa-3046-9c2a-2e6931a032e2</versionedComponentId>
      <name>Query for settlementWindows </name>
      <position x="5776.0" y="728.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ExecuteSQL</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Database Connection Pooling Service</name>
        <value>f588b330-0192-1000-c3c2-5b6de011724a</value>
      </property>
      <property>
        <name>sql-pre-query</name>
      </property>
      <property>
        <name>SQL select query</name>
        <value>SELECT 
s.settlementId as settlementId ,
ssw.settlementSettlementWindowId as settlementWindowId
FROM settlement s
JOIN settlementSettlementWindow ssw on ssw.settlementId = s.settlementId 
WHERE s.settlementId = "${settlementId}"</value>
      </property>
      <property>
        <name>sql-post-query</name>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>0 seconds</value>
      </property>
      <property>
        <name>dbf-normalize</name>
        <value>false</value>
      </property>
      <property>
        <name>dbf-user-logical-types</name>
        <value>false</value>
      </property>
      <property>
        <name>compression-format</name>
        <value>NONE</value>
      </property>
      <property>
        <name>dbf-default-precision</name>
        <value>10</value>
      </property>
      <property>
        <name>dbf-default-scale</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-max-rows</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-output-batch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-fetch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-auto-commit</name>
        <value>true</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>2e3684ad-0193-1000-f478-ec93a5e19c23</id>
      <versionedComponentId>c5a1501d-a42b-3b29-971b-9313d48b1822</versionedComponentId>
      <name>Payer conversion mongo query</name>
      <position x="2744.0" y="1504.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ReplaceText</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Replacement Strategy</name>
        <value>Regex Replace</value>
      </property>
      <property>
        <name>Regular Expression</name>
        <value>(?s)(^.*$)</value>
      </property>
      <property>
        <name>Replacement Value</name>
        <value>{
  "$set": {
	"transferId": "${transferId}",
	"conversions.payer.counterPartyProxy": "${counterPartyProxy}",
    "conversions.payer.conversionRequestId": "${conversionRequestId}",
	"conversions.payer.conversionId": "${conversionId}",
    "conversions.payer.conversionCommitRequestId": "${conversionCommitRequestId}",
    "conversions.payer.conversionState": "${conversionState}",
    "conversions.payer.counterPartyFSP": "${counterPartyFsp}",
    "conversions.payer.conversionType": "${conversionType}",
    "conversions.payer.conversionSettlementWindowId": NumberLong(${conversionSettlementWindowId}),
    "conversions.payer.conversionTerms.conversionId": "${conversionTermsConversionId}",
    "conversions.payer.conversionTerms.determiningTransferId": "${conversionTermsDeterminingTransferId}",
    "conversions.payer.conversionTerms.initiatingFsp": "${conversionTermsInitiatingFsp}",
    "conversions.payer.conversionTerms.counterPartyFsp": "${conversionTermsCounterPartyFsp}",
    "conversions.payer.conversionTerms.amountType": "${conversionTermsAmountType}",
    "conversions.payer.conversionTerms.sourceAmount.currency": "${conversionTermsSourceCurrency}",
    "conversions.payer.conversionTerms.sourceAmount.amount": ${conversionTermsSourceAmount},
    "conversions.payer.conversionTerms.targetAmount.currency": "${conversionTermsTargetCurrency}",
    "conversions.payer.conversionTerms.targetAmount.amount": ${conversionTermsTargetAmount},
    "conversions.payer.conversionTerms.expiration": {
			"$date": "${conversionTermsExpiration:trim()}"
	  },
    "conversions.payer.conversionTerms.ilpPacket": "${ilpPacket}"
  },
  "$push": {
    "conversions.payer.conversionStateChanges": {
      "conversionState": "${conversionStateChangesState}",
      "dateTime": {
			"$date": "${conversionStateChangesDateTime:trim()}" 
		},
      "reason": "${conversionStateChangesReason}"
    }
  }
}

</value>
      </property>
      <property>
        <name>Text to Prepend</name>
      </property>
      <property>
        <name>Text to Append</name>
      </property>
      <property>
        <name>Character Set</name>
        <value>UTF-8</value>
      </property>
      <property>
        <name>Maximum Buffer Size</name>
        <value>1 MB</value>
      </property>
      <property>
        <name>Evaluation Mode</name>
        <value>Line-by-Line</value>
      </property>
      <property>
        <name>Line-by-Line Evaluation Mode</name>
        <value>All</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>52a958a2-0193-1000-5703-d3220df91cac</id>
      <versionedComponentId>4360e162-2f57-3be5-8e76-e4f97b7c65ee</versionedComponentId>
      <name>LogAttribute</name>
      <position x="4064.0" y="1648.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.LogAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Log Level</name>
        <value>info</value>
      </property>
      <property>
        <name>Log Payload</name>
        <value>false</value>
      </property>
      <property>
        <name>Attributes to Log</name>
      </property>
      <property>
        <name>attributes-to-log-regex</name>
        <value>.*</value>
      </property>
      <property>
        <name>Attributes to Ignore</name>
      </property>
      <property>
        <name>attributes-to-ignore-regex</name>
      </property>
      <property>
        <name>Log FlowFile Properties</name>
        <value>true</value>
      </property>
      <property>
        <name>Output Format</name>
        <value>Line per Attribute</value>
      </property>
      <property>
        <name>Log prefix</name>
      </property>
      <property>
        <name>character-set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>1ec8dcba-0193-1000-8911-62200bed212b</id>
      <versionedComponentId>6894ba24-6a32-3b64-a4e6-25fa02d66f9d</versionedComponentId>
      <name>Extract values from json</name>
      <position x="1088.0" y="880.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.EvaluateJsonPath</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Destination</name>
        <value>flowfile-attribute</value>
      </property>
      <property>
        <name>Return Type</name>
        <value>auto-detect</value>
      </property>
      <property>
        <name>Path Not Found Behavior</name>
        <value>ignore</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <property>
        <name>transferStateChangeReason</name>
        <value>$['transferStateChangeReason']</value>
      </property>
      <property>
        <name>transactionId</name>
        <value>$['transactionId']</value>
      </property>
      <property>
        <name>transferTermsPayeeFspCommissionCurrency</name>
        <value>$['transferTermsPayeeFspCommissionCurrency']</value>
      </property>
      <property>
        <name>transferTermsTransferCurrency</name>
        <value>$['transferTermsTransferCurrency']</value>
      </property>
      <property>
        <name>quoteId</name>
        <value>$['quoteId']</value>
      </property>
      <property>
        <name>sourceAmount</name>
        <value>$['sourceAmount']</value>
      </property>
      <property>
        <name>transferTermsPayeeFspFeeCurrency</name>
        <value>$['transferTermsPayeeFspFeeCurrency']</value>
      </property>
      <property>
        <name>transferSettlementWindowId</name>
        <value>$['transferSettlementWindowId']</value>
      </property>
      <property>
        <name>transferStateChangeState</name>
        <value>$['transferStateChangeState']</value>
      </property>
      <property>
        <name>transferStateChangeDateTime</name>
        <value>$['transferStateChangeDateTime']</value>
      </property>
      <property>
        <name>ilpPacket</name>
        <value>$['ilpPacket']</value>
      </property>
      <property>
        <name>transactionType</name>
        <value>$['transactionType']</value>
      </property>
      <property>
        <name>payeeDFSP</name>
        <value>$['payeeDFSP']</value>
      </property>
      <property>
        <name>payerDFSP</name>
        <value>$['payerDFSP']</value>
      </property>
      <property>
        <name>quoteRequestCurrency</name>
        <value>$['quoteRequestCurrency']</value>
      </property>
      <property>
        <name>targetAmount</name>
        <value>$['targetAmount']</value>
      </property>
      <property>
        <name>payeeDFSPProxy</name>
        <value>$['payeeDFSPProxy']</value>
      </property>
      <property>
        <name>geoCodeLatitude</name>
        <value>$['geoCodeLatitude']</value>
      </property>
      <property>
        <name>transferId</name>
        <value>$['transferId']</value>
      </property>
      <property>
        <name>transferTermsPayeeFspCommissionAmount</name>
        <value>$['transferTermsPayeeFspCommissionAmount']</value>
      </property>
      <property>
        <name>quoteRequestAmountType</name>
        <value>$['quoteRequestAmountType']</value>
      </property>
      <property>
        <name>transferTermsPayeeFspFeeAmount</name>
        <value>$['transferTermsPayeeFspFeeAmount']</value>
      </property>
      <property>
        <name>positionChangesParticipantName</name>
        <value>$['positionChangesParticipantName']</value>
      </property>
      <property>
        <name>payeePartyIdType</name>
        <value>$['payeePartyIdType']</value>
      </property>
      <property>
        <name>sourceCurrency</name>
        <value>$['sourceCurrency']</value>
      </property>
      <property>
        <name>payeePartyIdentifier</name>
        <value>$['payeePartyIdentifier']</value>
      </property>
      <property>
        <name>errorCode</name>
        <value>$['errorCode']</value>
      </property>
      <property>
        <name>createdAt</name>
        <value>$['createdAt']</value>
      </property>
      <property>
        <name>positionChangesDateTime</name>
        <value>$['positionChangesDateTime']</value>
      </property>
      <property>
        <name>payerPartyIdType</name>
        <value>$['payerPartyIdType']</value>
      </property>
      <property>
        <name>baseUseCase</name>
        <value>$['baseUseCase']</value>
      </property>
      <property>
        <name>payerDFSPProxy</name>
        <value>$['payerDFSPProxy']</value>
      </property>
      <property>
        <name>transferTermsExpiration</name>
        <value>$['transferTermsExpiration']</value>
      </property>
      <property>
        <name>positionChangesCurrency</name>
        <value>$['positionChangesCurrency']</value>
      </property>
      <property>
        <name>positionChangesUpdatedValue</name>
        <value>$['positionChangesUpdatedValue']</value>
      </property>
      <property>
        <name>quoteRequestAmount</name>
        <value>$['quoteRequestAmount']</value>
      </property>
      <property>
        <name>transferTermsTransferAmount</name>
        <value>$['transferTermsTransferAmount']</value>
      </property>
      <property>
        <name>currency</name>
        <value>$['currency']</value>
      </property>
      <property>
        <name>geoCodeLongitude</name>
        <value>$['geoCodeLongitude']</value>
      </property>
      <property>
        <name>positionChangesChange</name>
        <value>$['positionChangesChange']</value>
      </property>
      <property>
        <name>positionChangesLedgerType</name>
        <value>$['positionChangesLedgerType']</value>
      </property>
      <property>
        <name>transferTermsPayeeReceiveCurrency</name>
        <value>$['transferTermsPayeeReceiveCurrency']</value>
      </property>
      <property>
        <name>payeePartyName</name>
        <value>$['payeePartyName']</value>
      </property>
      <property>
        <name>payerPartyIdentifier</name>
        <value>$['payerPartyIdentifier']</value>
      </property>
      <property>
        <name>transferTermsPayeeReceiveAmount</name>
        <value>$['transferTermsPayeeReceiveAmount']</value>
      </property>
      <property>
        <name>payerPartyName</name>
        <value>$['payerPartyName']</value>
      </property>
      <property>
        <name>targetCurrency</name>
        <value>$['targetCurrency']</value>
      </property>
      <property>
        <name>amount</name>
        <value>$['amount']</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>ffed5b4f-0192-1000-bb53-ed1944fe4399</id>
      <versionedComponentId>4b4e7a41-82be-34a8-bf40-ba6c886dc46c</versionedComponentId>
      <name>LogAttribute</name>
      <position x="864.0" y="1720.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.LogAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Log Level</name>
        <value>info</value>
      </property>
      <property>
        <name>Log Payload</name>
        <value>false</value>
      </property>
      <property>
        <name>Attributes to Log</name>
      </property>
      <property>
        <name>attributes-to-log-regex</name>
        <value>.*</value>
      </property>
      <property>
        <name>Attributes to Ignore</name>
      </property>
      <property>
        <name>attributes-to-ignore-regex</name>
      </property>
      <property>
        <name>Log FlowFile Properties</name>
        <value>true</value>
      </property>
      <property>
        <name>Output Format</name>
        <value>Line per Attribute</value>
      </property>
      <property>
        <name>Log prefix</name>
      </property>
      <property>
        <name>character-set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f62b0876-0192-1000-abcd-11f2ad314d1c</id>
      <versionedComponentId>69480fca-85ea-3759-b20f-3ee61d6d588b</versionedComponentId>
      <name>FxTransferStateChange Fetch</name>
      <position x="2976.0" y="-176.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.QueryDatabaseTable</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>1 min</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>PRIMARY</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Database Connection Pooling Service</name>
        <value>f588b330-0192-1000-c3c2-5b6de011724a</value>
      </property>
      <property>
        <name>db-fetch-db-type</name>
        <value>Generic</value>
      </property>
      <property>
        <name>Table Name</name>
        <value>fxTransferStateChange</value>
      </property>
      <property>
        <name>Columns to Return</name>
        <value>fxTransferStateChangeId, commitRequestId</value>
      </property>
      <property>
        <name>db-fetch-where-clause</name>
      </property>
      <property>
        <name>db-fetch-sql-query</name>
      </property>
      <property>
        <name>Maximum-value Columns</name>
        <value>fxTransferStateChangeId</value>
      </property>
      <property>
        <name>initial-load-strategy</name>
        <value>Start at Beginning</value>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>0 seconds</value>
      </property>
      <property>
        <name>Fetch Size</name>
        <value>0</value>
      </property>
      <property>
        <name>Set Auto Commit</name>
      </property>
      <property>
        <name>qdbt-max-rows</name>
        <value>0</value>
      </property>
      <property>
        <name>qdbt-output-batch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>qdbt-max-frags</name>
        <value>0</value>
      </property>
      <property>
        <name>dbf-normalize</name>
        <value>false</value>
      </property>
      <property>
        <name>transaction-isolation-level</name>
      </property>
      <property>
        <name>dbf-user-logical-types</name>
        <value>false</value>
      </property>
      <property>
        <name>dbf-default-precision</name>
        <value>10</value>
      </property>
      <property>
        <name>dbf-default-scale</name>
        <value>0</value>
      </property>
    </processor>
    <processor>
      <id>631d1e5b-0193-1000-89d8-fe1332d84175</id>
      <versionedComponentId>2fa6c3cd-40e7-3850-a090-5474e9938dbc</versionedComponentId>
      <name>LogAttribute</name>
      <position x="5256.0" y="1568.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.LogAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Log Level</name>
        <value>debug</value>
      </property>
      <property>
        <name>Log Payload</name>
        <value>false</value>
      </property>
      <property>
        <name>Attributes to Log</name>
      </property>
      <property>
        <name>attributes-to-log-regex</name>
        <value>.*</value>
      </property>
      <property>
        <name>Attributes to Ignore</name>
      </property>
      <property>
        <name>attributes-to-ignore-regex</name>
      </property>
      <property>
        <name>Log FlowFile Properties</name>
        <value>true</value>
      </property>
      <property>
        <name>Output Format</name>
        <value>Line per Attribute</value>
      </property>
      <property>
        <name>Log prefix</name>
      </property>
      <property>
        <name>character-set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>52aaac12-0193-1000-5578-93118770a4af</id>
      <versionedComponentId>ce501ea0-50fd-3fc8-86a2-26eb14af7039</versionedComponentId>
      <name>Convert date to mongo date</name>
      <position x="2976.0" y="1120.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.attributes.UpdateAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-update-attribute-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Delete Attributes Expression</name>
      </property>
      <property>
        <name>Store State</name>
        <value>Do not store state</value>
      </property>
      <property>
        <name>Stateful Variables Initial Value</name>
      </property>
      <property>
        <name>canonical-value-lookup-cache-size</name>
        <value>100</value>
      </property>
      <property>
        <name>conversionStateChangesDateTime</name>
        <value>${conversionStateChangesDateTime:toDate("yyyy-MM-dd HH:mm:ss.S"):format("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", "UTC")}
</value>
      </property>
      <property>
        <name>conversionTermsExpiration</name>
        <value>${conversionTermsExpiration:toDate("yyyy-MM-dd HH:mm:ss.S"):format("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", "UTC")}
</value>
      </property>
    </processor>
    <processor>
      <id>789e22c8-0196-1000-6d1d-2caa2182f7a2</id>
      <versionedComponentId>49f01a2b-fcfa-3d4e-a137-108a3c377c96</versionedComponentId>
      <name>ReplaceText</name>
      <position x="1096.0" y="160.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ReplaceText</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Replacement Strategy</name>
        <value>Literal Replace</value>
      </property>
      <property>
        <name>Regular Expression</name>
        <value>#</value>
      </property>
      <property>
        <name>Replacement Value</name>
        <value>'</value>
      </property>
      <property>
        <name>Text to Prepend</name>
      </property>
      <property>
        <name>Text to Append</name>
      </property>
      <property>
        <name>Character Set</name>
        <value>UTF-8</value>
      </property>
      <property>
        <name>Maximum Buffer Size</name>
        <value>1 MB</value>
      </property>
      <property>
        <name>Evaluation Mode</name>
        <value>Line-by-Line</value>
      </property>
      <property>
        <name>Line-by-Line Evaluation Mode</name>
        <value>All</value>
      </property>
    </processor>
    <processor>
      <id>01931000-b1f5-18ac-e362-c547703d5f31</id>
      <versionedComponentId>c94257e7-788d-37ee-89bb-a768e0ceeb2f</versionedComponentId>
      <name>ConvertAvroToJSON</name>
      <position x="5776.0" y="896.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.avro.ConvertAvroToJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-avro-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JSON container options</name>
        <value>array</value>
      </property>
      <property>
        <name>Wrap Single Record</name>
        <value>false</value>
      </property>
      <property>
        <name>Avro schema</name>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-7e14-1262-1c8f-e4684eeee7ae</id>
      <versionedComponentId>de244eca-7e44-3a95-8035-51c6947fec4c</versionedComponentId>
      <name>ExecuteScript</name>
      <position x="5776.0" y="1392.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.script.ExecuteScript</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-scripting-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Script Engine</name>
        <value>Groovy</value>
      </property>
      <property>
        <name>Script File</name>
      </property>
      <property>
        <name>Script Body</name>
        <value>import org.apache.nifi.processor.io.StreamCallback
import groovy.json.JsonSlurper
import groovy.json.JsonOutput

// StreamCallback to read and write flowfile content
class UpdateChargesCallback implements StreamCallback {
    @Override
    void process(InputStream inputStream, OutputStream outputStream) throws IOException {
        // Read flowfile content
        def input = inputStream.getText("UTF-8")
        def jsonSlurper = new JsonSlurper()
        def settlementWindowsData = jsonSlurper.parseText(input) // Parse input JSON as an array

        // Iterate over settlementWindows and format 'settlementWindowId' fields as NumberLong
        settlementWindowsData.settlementWindows.each { settlementWindow -&gt;
            if (settlementWindow.settlementWindowId) {
                // Wrap the settlementWindowId in a MongoDB-compatible NumberLong syntax
                settlementWindow.settlementWindowId = "NumberLong(${settlementWindow.settlementWindowId})"
            }
        }

        // Prepare MongoDB $set query with the typecasted array
        def mongoQuery = [
            '$set': [
                'settlementWindows': settlementWindowsData.settlementWindows
            ]
        ]

        // Convert to JSON string (keep NumberLong syntax as raw text)
        def output = JsonOutput.toJson(mongoQuery).replaceAll('"NumberLong\\((\\d+)\\)"', 'NumberLong($1)')

        // Write transformed JSON query to flowfile
        outputStream.write(output.getBytes("UTF-8"))
    }
}

// Execute the script
flowFile = session.get()
if (flowFile) {
    flowFile = session.write(flowFile, new UpdateChargesCallback())
    session.transfer(flowFile, REL_SUCCESS)
}
</value>
      </property>
      <property>
        <name>Module Directory</name>
      </property>
    </processor>
    <processor>
      <id>48acb1f5-0193-1000-6a5e-f44ca96dd478</id>
      <versionedComponentId>03f0301a-27aa-3f8b-94fb-c39fdef9fcaf</versionedComponentId>
      <name>ConvertAvroToJSON</name>
      <position x="3624.0" y="944.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.avro.ConvertAvroToJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-avro-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JSON container options</name>
        <value>array</value>
      </property>
      <property>
        <name>Wrap Single Record</name>
        <value>false</value>
      </property>
      <property>
        <name>Avro schema</name>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>61cbcaa7-0193-1000-9557-d4e4f8d844ff</id>
      <versionedComponentId>802a0128-7d18-3caa-ad50-d087f43063e5</versionedComponentId>
      <name>LogAttribute</name>
      <position x="6184.0" y="1392.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.LogAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Log Level</name>
        <value>info</value>
      </property>
      <property>
        <name>Log Payload</name>
        <value>false</value>
      </property>
      <property>
        <name>Attributes to Log</name>
      </property>
      <property>
        <name>attributes-to-log-regex</name>
        <value>.*</value>
      </property>
      <property>
        <name>Attributes to Ignore</name>
      </property>
      <property>
        <name>attributes-to-ignore-regex</name>
      </property>
      <property>
        <name>Log FlowFile Properties</name>
        <value>true</value>
      </property>
      <property>
        <name>Output Format</name>
        <value>Line per Attribute</value>
      </property>
      <property>
        <name>Log prefix</name>
      </property>
      <property>
        <name>character-set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>784d42fb-0196-1000-2130-f21a54b60bfb</id>
      <versionedComponentId>f6edf7f3-28aa-30aa-9d87-fd0279537a69</versionedComponentId>
      <name>JoltTransformJSON</name>
      <position x="1088.0" y="0.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.JoltTransformJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>jolt-transform</name>
        <value>jolt-transform-chain</value>
      </property>
      <property>
        <name>jolt-custom-class</name>
      </property>
      <property>
        <name>jolt-custom-modules</name>
      </property>
      <property>
        <name>jolt-spec</name>
        <value>[
  {
    "operation": "shift",
    "spec": {
      "*": {
        "transferId": "[&amp;1]"
      }
    }
  },
  {
    "operation": "shift",
    "spec": {
      "*": "transferIds[]"
    }
  },
  {
    "operation": "modify-overwrite-beta",
    "spec": {
      "transferIds": {
        "*": "=concat('#',@0,'#')"
      }
    }
  },
  {
    "operation": "modify-overwrite-beta",
    "spec": {
      "transferIds": "=join(',', @(1,transferIds))"
    }
  }
]</value>
      </property>
      <property>
        <name>Transform Cache Size</name>
        <value>1</value>
      </property>
      <property>
        <name>pretty_print</name>
        <value>false</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>2418811b-0193-1000-cf44-33db74a3d9ce</id>
      <versionedComponentId>5267fedf-4c85-3561-a514-aed0f1c67895</versionedComponentId>
      <name>Create Mongo query with details</name>
      <position x="864.0" y="1376.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ReplaceText</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Replacement Strategy</name>
        <value>Regex Replace</value>
      </property>
      <property>
        <name>Regular Expression</name>
        <value>(?s)(^.*$)</value>
      </property>
      <property>
        <name>Replacement Value</name>
        <value>{
  "$set": {
    "transferId": "${transferId}",
	"transactionId": "${transactionId}",
	"baseUseCase": "${baseUseCase}",
	"sourceAmount": ${sourceAmount:isEmpty():ifElse(${amount}, ${sourceAmount})},
    "sourceCurrency": "${sourceCurrency:isEmpty():ifElse('${currency}', '${sourceCurrency}')}",
	"targetAmount": ${targetAmount:isEmpty():ifElse(${amount}, ${targetAmount})},
	"targetCurrency" : "${targetCurrency:isEmpty():ifElse('${currency}', '${targetCurrency}')}",
	"createdAt": {
			"$date": "${createdAt:trim()}"
		},
	"lastUpdated": {
			"$date": "${transferStateChangeDateTime:trim()}"
		},
    "transferState": "${transferStateChangeState}",
	"transactionType": "${transactionType}",
	"errorCode": "${errorCode}",
	"transferSettlementWindowId": ${transferSettlementWindowId:isEmpty():ifElse('null', "NumberLong(${transferSettlementWindowId})")} ,
	"payerDFSP": "${payerDFSP}",
	"payerDFSPProxy": "${payerDFSPProxy}",
	"payeeDFSP": "${payeeDFSP}",
	"payeeDFSPProxy": "${payeeDFSPProxy}",
	"payeeParty": {
	  "partyIdType": "${payeePartyIdType}",
      "partyIdentifier": "${payeePartyIdentifier}",
      "partyName": "${payeePartyName}",
      "supportedCurrencies": 'null',
	},
	"payerParty": {
	  "partyIdType": "${payerPartyIdType}",
      "partyIdentifier": "${payerPartyIdentifier}",
      "partyName": "${payerPartyName}",
      "supportedCurrencies": 'null',
	},
  "quoteRequest": {
        "quoteId": "${quoteId}",
        "amountType": "${quoteRequestAmountType}",
        "amount": {
          "currency": "${quoteRequestCurrency}",
          "amount": ${quoteRequestAmount:isEmpty():ifElse(0, ${quoteRequestAmount})}
        },
        "fees": {
          "currency": 'null',
          "amount": 0
        },
      },
  "transferTerms": {
      "transferAmount": {
        "currency": "${transferTermsTransferCurrency}",
        "amount": ${transferTermsTransferAmount}
      },
      "payeeReceiveAmount": {
        "currency": "${transferTermsPayeeReceiveCurrency}",
        "amount":${transferTermsPayeeReceiveAmount:isEmpty():ifElse(0, ${transferTermsPayeeReceiveAmount})}
      },
      "payeeFspFee": {
        "currency": "${transferTermsPayeeFspFeeCurrency}",
        "amount": ${transferTermsPayeeFspFeeAmount:isEmpty():ifElse(0, ${transferTermsPayeeFspFeeAmount})}
      },
      "payeeFspCommission":  {
        "currency": "${transferTermsPayeeFspCommissionCurrency}",
		"amount": ${transferTermsPayeeFspCommissionAmount:isEmpty():ifElse(0, ${transferTermsPayeeFspCommissionAmount})}
      },
      "expiration": { "$date": "${transferTermsExpiration:trim()}" },
      "geoCode": {
        "latitude": "${geoCodeLatitude}",
        "longitude": "${geoCodeLongitude}"
      },
      "ilpPacket": "${ilpPacket}"   
    },
  },
  "$push": {
    "transferStateChanges": {
      "transferState": "${transferStateChangeState}",
      "reason": "${transferStateChangeReason}",
      "dateTime": {
			"$date": "${transferStateChangeDateTime:trim()}"
		}
    }
	${positionChangesParticipantName:isEmpty():ifElse('', ',"positionChanges" : { "participantName": "${positionChangesParticipantName}", "currency": "${positionChangesCurrency}", "ledgerType": "${positionChangesLedgerType}", "dateTime": {"$date": "${positionChangesDateTime}"}, "updatedPosition": ${positionChangesUpdatedValue}, "change": ${positionChangesChange} }')}

  }
}
</value>
      </property>
      <property>
        <name>Text to Prepend</name>
      </property>
      <property>
        <name>Text to Append</name>
      </property>
      <property>
        <name>Character Set</name>
        <value>UTF-8</value>
      </property>
      <property>
        <name>Maximum Buffer Size</name>
        <value>1 MB</value>
      </property>
      <property>
        <name>Evaluation Mode</name>
        <value>Line-by-Line</value>
      </property>
      <property>
        <name>Line-by-Line Evaluation Mode</name>
        <value>All</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>620e1f82-0193-1000-6795-03349b85274b</id>
      <versionedComponentId>690a5c1a-3e89-3d71-8013-95e92709f4ea</versionedComponentId>
      <name>LogAttribute</name>
      <position x="1328.0" y="1232.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.LogAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Log Level</name>
        <value>info</value>
      </property>
      <property>
        <name>Log Payload</name>
        <value>false</value>
      </property>
      <property>
        <name>Attributes to Log</name>
      </property>
      <property>
        <name>attributes-to-log-regex</name>
        <value>.*</value>
      </property>
      <property>
        <name>Attributes to Ignore</name>
      </property>
      <property>
        <name>attributes-to-ignore-regex</name>
      </property>
      <property>
        <name>Log FlowFile Properties</name>
        <value>true</value>
      </property>
      <property>
        <name>Output Format</name>
        <value>Line per Attribute</value>
      </property>
      <property>
        <name>Log prefix</name>
      </property>
      <property>
        <name>character-set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f5925f69-0192-1000-e4e5-06a1352474e8</id>
      <versionedComponentId>9c049734-8ab9-3eee-b095-07f49d21fa4a</versionedComponentId>
      <name>Save to Mongo DB</name>
      <position x="864.0" y="1544.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.mongodb.PutMongo</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-mongodb-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>mongo-client-service</name>
        <value>f58ceb00-0192-1000-456c-dfb46e071bcc</value>
      </property>
      <property>
        <name>Mongo URI</name>
      </property>
      <property>
        <name>Mongo Database Name</name>
        <value>${REPORTING_EVENTS_DB_DATABASE}</value>
      </property>
      <property>
        <name>Mongo Collection Name</name>
        <value>transaction</value>
      </property>
      <property>
        <name>ssl-context-service</name>
      </property>
      <property>
        <name>ssl-client-auth</name>
        <value>NONE</value>
      </property>
      <property>
        <name>Mode</name>
        <value>update</value>
      </property>
      <property>
        <name>Upsert</name>
        <value>true</value>
      </property>
      <property>
        <name>Update Query Key</name>
      </property>
      <property>
        <name>putmongo-update-query</name>
        <value>{ "transferId": "${transferId}" }</value>
      </property>
      <property>
        <name>put-mongo-update-mode</name>
        <value>operators</value>
      </property>
      <property>
        <name>Write Concern</name>
        <value>ACKNOWLEDGED</value>
      </property>
      <property>
        <name>Character Set</name>
        <value>UTF-8</value>
      </property>
    </processor>
    <processor>
      <id>6215b646-0193-1000-e44a-81544bcef4c5</id>
      <versionedComponentId>90d52517-06b9-3e1c-89fb-df64c682f257</versionedComponentId>
      <name>RouteOnAttribute</name>
      <position x="3624.0" y="1288.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.RouteOnAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Routing Strategy</name>
        <value>Route to Property name</value>
      </property>
      <property>
        <name>data is not null</name>
        <value>${transferId:trim():length():gt(0)}</value>
      </property>
      <property>
        <name>data is null</name>
        <value>${transferId:isEmpty()}</value>
      </property>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>48ad5df8-0193-1000-e29e-a00ff55ae239</id>
      <versionedComponentId>bda9a316-5b1c-39bd-b7a5-1f18e0390471</versionedComponentId>
      <name>Covert charges array to required format</name>
      <position x="3624.0" y="1472.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.JoltTransformJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>jolt-transform</name>
        <value>jolt-transform-chain</value>
      </property>
      <property>
        <name>jolt-custom-class</name>
      </property>
      <property>
        <name>jolt-custom-modules</name>
      </property>
      <property>
        <name>jolt-spec</name>
        <value>[
  {
    "operation": "shift",
    "spec": {
      "*": {
        "chargeType": "charges[&amp;1].chargeType",
        "sourceAmount": "charges[&amp;1].sourceAmount.amount",
        "sourceCurrency": "charges[&amp;1].sourceAmount.currency",
        "targetAmount": "charges[&amp;1].targetAmount.amount",
        "targetCurrency": "charges[&amp;1].targetAmount.currency"
      }
    }
  }
]</value>
      </property>
      <property>
        <name>Transform Cache Size</name>
        <value>1</value>
      </property>
      <property>
        <name>pretty_print</name>
        <value>false</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>48ac69c4-0193-1000-df3e-40cf6b91f614</id>
      <versionedComponentId>c6bfa5be-a629-32ce-820f-7c182b0ac1e9</versionedComponentId>
      <name>SQL query for charges</name>
      <position x="3624.0" y="784.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ExecuteSQL</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Database Connection Pooling Service</name>
        <value>f588b330-0192-1000-c3c2-5b6de011724a</value>
      </property>
      <property>
        <name>sql-pre-query</name>
      </property>
      <property>
        <name>SQL select query</name>
        <value>SELECT
ft.determiningTransferId,
fc.chargeType, 
fc.sourceAmount, 
fc.sourceCurrency, 
fc.targetAmount, 
fc.targetCurrency 
from 
fxTransfer ft 
JOIN fxCharge fc on fc.conversionId = ft.commitRequestId 
WHERE ft.commitRequestId = "${commitRequestId}" ; </value>
      </property>
      <property>
        <name>sql-post-query</name>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>0 seconds</value>
      </property>
      <property>
        <name>dbf-normalize</name>
        <value>false</value>
      </property>
      <property>
        <name>dbf-user-logical-types</name>
        <value>false</value>
      </property>
      <property>
        <name>compression-format</name>
        <value>NONE</value>
      </property>
      <property>
        <name>dbf-default-precision</name>
        <value>10</value>
      </property>
      <property>
        <name>dbf-default-scale</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-max-rows</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-output-batch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-fetch-size</name>
        <value>0</value>
      </property>
      <property>
        <name>esql-auto-commit</name>
        <value>true</value>
      </property>
    </processor>
    <processor>
      <id>01931002-ac12-12aa-353a-c6c934e94c2d</id>
      <versionedComponentId>d9dc2f34-50a0-36fb-91bc-54b39e6cc365</versionedComponentId>
      <name>SplitJson</name>
      <position x="5256.0" y="200.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.SplitJson</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JsonPath Expression</name>
        <value>$.*</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>original</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-5df8-18ad-e215-c8ec03074d12</id>
      <versionedComponentId>98f28131-edce-3683-a83b-5852617d6441</versionedComponentId>
      <name>Convert to required format</name>
      <position x="5776.0" y="1208.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.JoltTransformJSON</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>jolt-transform</name>
        <value>jolt-transform-chain</value>
      </property>
      <property>
        <name>jolt-custom-class</name>
      </property>
      <property>
        <name>jolt-custom-modules</name>
      </property>
      <property>
        <name>jolt-spec</name>
        <value>[
  {
    "operation": "shift",
    "spec": {
      "*": { 
        "settlementWindowId": "settlementWindows[&amp;1].settlementWindowId"
      },
	  "settlementWindowId": "settlementWindows[0].settlementWindowId"
    }
  }
]</value>
      </property>
      <property>
        <name>Transform Cache Size</name>
        <value>1</value>
      </property>
      <property>
        <name>pretty_print</name>
        <value>false</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-85c2-18ad-c79f-2b1c5ec52765</id>
      <versionedComponentId>01164327-91aa-3a76-918e-d8c5c92d4801</versionedComponentId>
      <name>Update the settlementId </name>
      <position x="5776.0" y="1056.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.EvaluateJsonPath</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Destination</name>
        <value>flowfile-attribute</value>
      </property>
      <property>
        <name>Return Type</name>
        <value>auto-detect</value>
      </property>
      <property>
        <name>Path Not Found Behavior</name>
        <value>ignore</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-0734-1e36-7b30-0e608d8f5f13</id>
      <versionedComponentId>837f1531-b27c-3824-bc73-056607f21de8</versionedComponentId>
      <name>Extract the details as attributes</name>
      <position x="5256.0" y="840.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.EvaluateJsonPath</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Destination</name>
        <value>flowfile-attribute</value>
      </property>
      <property>
        <name>Return Type</name>
        <value>auto-detect</value>
      </property>
      <property>
        <name>Path Not Found Behavior</name>
        <value>ignore</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <property>
        <name>lastUpdated</name>
        <value>$['lastUpdated']</value>
      </property>
      <property>
        <name>settlementStatus</name>
        <value>$['settlementStatus']</value>
      </property>
      <property>
        <name>settlementModel</name>
        <value>$['settlementModel']</value>
      </property>
      <property>
        <name>settlementId</name>
        <value>$['settlementId']</value>
      </property>
      <property>
        <name>reason</name>
        <value>$['reason']</value>
      </property>
      <property>
        <name>createdAt</name>
        <value>$['createdAt']</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931005-b646-1215-c5f5-7d55724a65d8</id>
      <versionedComponentId>d0116bdd-7eb0-31ea-836b-e516550117c7</versionedComponentId>
      <name>LogAttribute</name>
      <position x="2512.0" y="960.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.LogAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Log Level</name>
        <value>info</value>
      </property>
      <property>
        <name>Log Payload</name>
        <value>false</value>
      </property>
      <property>
        <name>Attributes to Log</name>
      </property>
      <property>
        <name>attributes-to-log-regex</name>
        <value>.*</value>
      </property>
      <property>
        <name>Attributes to Ignore</name>
      </property>
      <property>
        <name>attributes-to-ignore-regex</name>
      </property>
      <property>
        <name>Log FlowFile Properties</name>
        <value>true</value>
      </property>
      <property>
        <name>Output Format</name>
        <value>Line per Attribute</value>
      </property>
      <property>
        <name>Log prefix</name>
      </property>
      <property>
        <name>character-set</name>
        <value>UTF-8</value>
      </property>
      <autoTerminatedRelationship>success</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f629f74e-0192-1000-187c-ed063c434321</id>
      <versionedComponentId>d31a41f5-8a4a-3d55-a8f1-0bc286fea98a</versionedComponentId>
      <name>SplitJson</name>
      <position x="2976.0" y="136.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.SplitJson</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>JsonPath Expression</name>
        <value>$.*</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>original</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-b646-1215-8f81-ff6066c7de87</id>
      <versionedComponentId>f002dfbb-ff16-3016-af3d-9dd179a8eb9f</versionedComponentId>
      <name>RouteOnAttribute</name>
      <position x="2976.0" y="960.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.RouteOnAttribute</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Routing Strategy</name>
        <value>Route to Property name</value>
      </property>
      <property>
        <name>data is not null</name>
        <value>${transferId:trim():length():gt(0)}</value>
      </property>
      <property>
        <name>data is null</name>
        <value>${transferId:isEmpty()}</value>
      </property>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>f6fc58ee-0192-1000-a60b-f5335a92b47d</id>
      <versionedComponentId>5936972d-210c-3516-b32e-34362cbaf0a4</versionedComponentId>
      <name>Extract commitRequestId</name>
      <position x="2976.0" y="288.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.EvaluateJsonPath</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Destination</name>
        <value>flowfile-attribute</value>
      </property>
      <property>
        <name>Return Type</name>
        <value>auto-detect</value>
      </property>
      <property>
        <name>Path Not Found Behavior</name>
        <value>ignore</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <property>
        <name>commitRequestId</name>
        <value>$['commitRequestId']</value>
      </property>
      <property>
        <name>fxTransferStateChangeId</name>
        <value>$['fxTransferStateChangeId']</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
      <autoTerminatedRelationship>unmatched</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>7877cdc3-0196-1000-2a05-de0ec415b844</id>
      <versionedComponentId>22d090e4-a82d-394a-b810-71caf790c1d1</versionedComponentId>
      <name>EvaluateJsonPath</name>
      <position x="1088.0" y="352.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.EvaluateJsonPath</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>0</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Destination</name>
        <value>flowfile-attribute</value>
      </property>
      <property>
        <name>Return Type</name>
        <value>auto-detect</value>
      </property>
      <property>
        <name>Path Not Found Behavior</name>
        <value>ignore</value>
      </property>
      <property>
        <name>Null Value Representation</name>
        <value>empty string</value>
      </property>
      <property>
        <name>Max String Length</name>
        <value>20 MB</value>
      </property>
      <property>
        <name>transferIds</name>
        <value>$.transferIds</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <processor>
      <id>01931000-84ad-1e36-b5a9-b337e2bdb80c</id>
      <versionedComponentId>dcbb8920-2508-30ff-96f1-19576109482b</versionedComponentId>
      <name>Convert to Mongodb query</name>
      <position x="5256.0" y="1184.0"/>
      <styles/>
      <comment/>
      <class>org.apache.nifi.processors.standard.ReplaceText</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-standard-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <maxConcurrentTasks>1</maxConcurrentTasks>
      <schedulingPeriod>0 sec</schedulingPeriod>
      <penalizationPeriod>30 sec</penalizationPeriod>
      <yieldPeriod>1 sec</yieldPeriod>
      <bulletinLevel>WARN</bulletinLevel>
      <lossTolerant>false</lossTolerant>
      <scheduledState>RUNNING</scheduledState>
      <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
      <executionNode>ALL</executionNode>
      <runDurationNanos>25000000</runDurationNanos>
      <retryCount>10</retryCount>
      <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
      <maxBackoffPeriod>10 mins</maxBackoffPeriod>
      <property>
        <name>Replacement Strategy</name>
        <value>Regex Replace</value>
      </property>
      <property>
        <name>Regular Expression</name>
        <value>(?s)(^.*$)</value>
      </property>
      <property>
        <name>Replacement Value</name>
        <value>{
  "$set": {
	"settlementId": NumberLong(${settlementId}),
	"createdAt" : { 
		"$date" : "${createdAt:trim()}"
  	},
	"lastUpdatedAt" : { 
		"$date" : "${lastUpdated:trim()}"
  	},
	"settlementStatus" : "${settlementStatus}",
	"settlementModel" : "${settlementModel}"
  },
  "$push": {
      "settlementStateChange": {
        "reason": "${reason}",
        "status": "${settlementStatus}",
        "dateTime": {
          "$date": "${lastUpdated:trim()}"
        }
      }
    }
}

</value>
      </property>
      <property>
        <name>Text to Prepend</name>
      </property>
      <property>
        <name>Text to Append</name>
      </property>
      <property>
        <name>Character Set</name>
        <value>UTF-8</value>
      </property>
      <property>
        <name>Maximum Buffer Size</name>
        <value>1 MB</value>
      </property>
      <property>
        <name>Evaluation Mode</name>
        <value>Line-by-Line</value>
      </property>
      <property>
        <name>Line-by-Line Evaluation Mode</name>
        <value>All</value>
      </property>
      <autoTerminatedRelationship>failure</autoTerminatedRelationship>
    </processor>
    <label>
      <id>0193100a-4137-16fb-9702-dea09b1ca941</id>
      <versionedComponentId>cc336eab-3e08-3789-9825-2ea1c94a4c99</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="1480.0" y="1048.0"/>
      <size height="112.0" width="400.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>check if the query returns any data by checking transferId
attribute value.
Reasoning for doing it here and not right after the convertojson is that 
rounteOnContent can be used for that to check there is data 
or not but it needs to parse the data
And routeonattribute processor works on metadata attributes and
is efficient.
</value>
    </label>
    <label>
      <id>01931002-4137-16fb-f7a3-11b3f9266f06</id>
      <versionedComponentId>e088164c-db89-3bf3-9ce0-bdbc97d4f6e8</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="4544.0" y="-96.0"/>
      <size height="536.0" width="616.0"/>
      <styles>
        <style name="font-size">20px</style>
      </styles>
      <value>Flow for state changes in settlements:
01.  Gets the state changes in the settlementStateChange table
02.  Splits them in individual objects
03.  Extract the settlementId from each object 
       along with the settlement state and store it as a attribute 
       for the flow file.
04.  Use the settlementId and settlementState to run 
       an sql query and get the settlement details
05.  If there is no data log the data to logattribute 
       else continue with the flow
06.  Map the values from the query to flow file
       attributes so they 
       can be used in the replacetext processor
07.  Convert the attribute values for dates 
        to mongodb format using the updateAttribute
        processor
08.  Create a mongodb query using the 
        ReplaceText processor to insert the data 
09.  Using putMongo processor insert 
        data on the matching settlementId
10.  Log the failures and success</value>
    </label>
    <label>
      <id>0193100c-4137-16fb-797a-7689cbfa9368</id>
      <versionedComponentId>7c2d34c4-3658-3060-9f62-5346d51a52b8</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="6144.0" y="760.0"/>
      <size height="48.0" width="408.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>same reasoning as charges for the conversion to have a different flow.
Many to one relationship of settlementwindows</value>
    </label>
    <label>
      <id>01931009-4137-16fb-71ff-6eff4d2a7ce6</id>
      <versionedComponentId>6b7cbaac-e8e9-3a8e-b231-a5675adf7b8e</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="456.0" y="1400.0"/>
      <size height="64.0" width="392.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>Replace text processors are used instead of the jolttransform 
for data mapping as they can create query for dynamic change to only 
a part of the mongo document not whole document</value>
    </label>
    <label>
      <id>0193100b-4137-16fb-9217-2486a1cb8997</id>
      <versionedComponentId>f99f2dee-037e-3fc8-80ac-a6d475101b77</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="248.0" y="472.0"/>
      <size height="152.0" width="712.0"/>
      <styles>
        <style name="font-size">22px</style>
      </styles>
      <value>NOTE : Most of the processors are configured to terminate the failure.
To check the failure the developer will need to check the 
data provenance 
This applies to all three flows.
( Also if any edge case is missed please add it )</value>
    </label>
    <label>
      <id>01931011-4137-16fb-0ef2-a90eb7acba3f</id>
      <versionedComponentId>c1c0e2a5-cb69-38a4-b4d2-c881e127018e</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="6160.0" y="1240.0"/>
      <size height="48.0" width="384.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>if there is only one settlementWindow then it is mapped as first index
by the jolt transform , else we store whole as a array</value>
    </label>
    <label>
      <id>66fb4137-0193-1000-9a30-e1aa089b10bd</id>
      <versionedComponentId>7cb04914-6802-3a3e-b53a-c245b92026b2</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="432.0" y="-112.0"/>
      <size height="528.0" width="560.0"/>
      <styles>
        <style name="font-size">20px</style>
      </styles>
      <value>Flow for state changes in transfers:

01.  Gets the state changes in the transferStateChange table
02.  Splits them in individual objects
03.  Extract the transferId from each object 
       along with the state and store it as a attribute 
       for the flow file.
04.  Use the transferId and transferState to run 
       an sql query and get the transaction details
05.  If there is no data log the data to logattribute 
       else continue with the flow
06.  Map the values to the attributes so they 
       can be used in the replacetext processor
07.  Convert the attribute values for dates 
        to mongodb format using the updateAttribute processor
08.  Create a mongodb query using the 
        ReplaceText processor to insert the data 
09.  Using putMongo processor insert 
        data on the matching transferId
10.  Log the failures and success</value>
    </label>
    <label>
      <id>0193100d-4137-16fb-9fb4-afa47ff4ff6e</id>
      <versionedComponentId>5cbc75d7-55a0-35b1-b39c-9b3948db8ba9</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="6160.0" y="1080.0"/>
      <size height="40.0" width="328.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>Update or extract the settlementId from the query data. 
If there is no value we route it to null.</value>
    </label>
    <label>
      <id>01931004-4137-16fb-a8f2-1232fc2f1c83</id>
      <versionedComponentId>0cf8e1eb-be74-33f1-a1ac-8bdb26f139bb</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="4040.0" y="1208.0"/>
      <size height="64.0" width="384.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>routeonatribute is there in case no charges are found and it 
does not clog the queue if the script fails and is not able to process
null data
This is done by checking if the transferId attribute is null
</value>
    </label>
    <label>
      <id>01931003-4137-16fb-555f-ea1fa4256f88</id>
      <versionedComponentId>a69604af-7eb4-333a-89ba-d285760ff5b3</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="4000.0" y="776.0"/>
      <size height="152.0" width="408.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>To get the charges on the conversion-

Another flow was made as the charges can't be retrieved as a flat 
row for a particular state and even if we are able to query as
a flat row the mapping with the replacetext was rather unfavourable on 
charges array so another flow was made .
Another reason for this is charges is an array and setting an array 
with replace text is not easy 
Having another flow handling many to one relationship is easy
</value>
    </label>
    <label>
      <id>01931007-4137-16fb-34b6-ada1342c6719</id>
      <versionedComponentId>60ce93b9-7030-34d9-9c68-a0aae99ab55a</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="2496.0" y="864.0"/>
      <size height="64.0" width="384.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>routeonatribute is there in case no data is there from the query and it 
does not clog the queue if the update attribute is not able to process
null data attributes
This is done by checking if the transferId attribute is null
</value>
    </label>
    <label>
      <id>01931010-4137-16fb-08ea-696642bfbda7</id>
      <versionedComponentId>1c26aa1e-aa84-3cae-8d10-bb1e79e7680c</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="5776.0" y="1544.0"/>
      <size height="48.0" width="432.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>script to convert settlementWindow to mongo db query and 
convert the settlementWindow to decimals as they were being stored as string.</value>
    </label>
    <label>
      <id>01931000-4137-16fb-4208-00390c288c59</id>
      <versionedComponentId>23847fae-745d-3327-afc0-f6b063503cca</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="2128.0" y="-72.0"/>
      <size height="568.0" width="616.0"/>
      <styles>
        <style name="font-size">20px</style>
      </styles>
      <value>Flow for state changes in conversions:

01.  Gets the state changes in the fxTransferStateChange table
02.  Splits them in individual objects
03.  Extract the commitRequestId from each object 
       along with the converison state and store it as a attribute 
       for the flow file.
04.  Use the commitRequestId and conversionState to run 
       an sql query and get the conversion details
05.  If there is no data log the data to logattribute 
       else continue with the flow
06.  Map the values from the query to flow file
       attributes so they 
       can be used in the replacetext processor
07.  Convert the attribute values for dates 
        to mongodb format using the updateAttribute
        processor
08.  Create a mongodb query using the 
        ReplaceText processor to insert the data 
09.  Using putMongo processor insert 
        data on the matching transferId
10.  Log the failures and success</value>
    </label>
    <label>
      <id>67661aa4-0193-1000-af1f-d92b5d941a0c</id>
      <versionedComponentId>ad4c8043-1fa9-3ca8-bb05-588b3e94d2d4</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="2496.0" y="1096.0"/>
      <size height="80.0" width="376.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>In case the query returns multiple rows this will result in a data is null
routing

(Query should not be returning more than one row at any time)
</value>
    </label>
    <label>
      <id>01931005-4137-16fb-1736-6e6f70363d7b</id>
      <versionedComponentId>bc511b7d-3555-3941-82eb-eb1b7c286f23</versionedComponentId>
      <zIndex>0</zIndex>
      <position x="3640.0" y="1800.0"/>
      <size height="72.0" width="384.0"/>
      <styles>
        <style name="font-size">12px</style>
      </styles>
      <value>script to convert charges to mongo db query and 
convert the number to decimals as they were being stored as string.
Script also check if the conversion is payer side or payee side
In case of invalid conversion a failure can take place</value>
    </label>
    <connection>
      <id>7b2649e4-0196-1000-85f4-bbfebbf47245</id>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f591e0ed-0192-1000-4a4c-13e5444104d7</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>1ec8dcba-0193-1000-8911-62200bed212b</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>78787f88-0196-1000-5b38-7da1a293cb5d</id>
      <versionedComponentId>f42ef700-576d-34dd-9c43-d3da405d4166</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>7877cdc3-0196-1000-2a05-de0ec415b844</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>f5918073-0192-1000-f006-d61f74adcebc</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>unmatched</relationship>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931007-ac12-12aa-ea09-02f3970aab14</id>
      <versionedComponentId>22610b18-9406-33af-911e-5731da3ccacf</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931002-ac12-12aa-353a-c6c934e94c2d</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931004-ac12-12aa-6624-a9bec3e58bf2</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>split</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>621e833e-0193-1000-25e8-87af97df92d4</id>
      <versionedComponentId>bc5a12c8-2f82-3c40-b5e5-18c3ebb2ea6c</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>6215b646-0193-1000-e44a-81544bcef4c5</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>48ad5df8-0193-1000-e29e-a00ff55ae239</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>data is not null</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>789ee9c6-0196-1000-bbda-aa47d5a7dccb</id>
      <versionedComponentId>17f076a4-0d51-3a08-bb1a-ca38aa8a36f2</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>789e22c8-0196-1000-6d1d-2caa2182f7a2</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>7877cdc3-0196-1000-2a05-de0ec415b844</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <relationship>failure</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>ffed8846-0192-1000-ed23-0a4e7b2dd7a9</id>
      <versionedComponentId>5f5f702b-1563-3774-9771-0df61b156528</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f5925f69-0192-1000-e4e5-06a1352474e8</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>ffed5b4f-0192-1000-bb53-ed1944fe4399</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>f5975bdd-0192-1000-47f8-091c79cfa344</id>
      <versionedComponentId>db2e4fe3-6407-3036-b352-3c3a3e9cf7e9</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f5918073-0192-1000-f006-d61f74adcebc</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>f591e0ed-0192-1000-4a4c-13e5444104d7</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>2423c51f-0193-1000-798c-dde5cbccab5c</id>
      <versionedComponentId>b62bfaac-32be-38d0-b02e-783b0ec70b71</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>2418811b-0193-1000-cf44-33db74a3d9ce</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>f5925f69-0192-1000-e4e5-06a1352474e8</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61e3e05a-0193-1000-785e-c350f5fb81b2</id>
      <versionedComponentId>2f946345-ebf0-393c-ac94-8724606476cc</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>61dee536-0193-1000-6ed7-bdc5ae5e0bf3</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>2e3684ad-0193-1000-f478-ec93a5e19c23</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>payer</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61db29a0-0193-1000-7c7d-c09f3f45d729</id>
      <versionedComponentId>f6b75aa0-b915-3ac1-919b-a945830210ea</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>2e360734-0193-1000-c49b-9875fe7d5eab</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>48ac69c4-0193-1000-df3e-40cf6b91f614</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>2e35e3a2-0193-1000-1ae2-bad0d2950750</id>
      <versionedComponentId>ade1e5a4-2638-3802-a651-91550d593a2a</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>2a4db2cd-0193-1000-c5c0-1f946dff6dff</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>2e35ad1a-0193-1000-577c-3e72a0f49fcb</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>0193100c-ac12-12aa-2439-05f05e383c8b</id>
      <versionedComponentId>46047268-91f7-3c07-9248-c298ae5cf3fa</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-ac12-12aa-7c8e-3180e1549684</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-84ad-1e36-b5a9-b337e2bdb80c</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>484ee884-0193-1000-bb6c-b38fefe54994</id>
      <versionedComponentId>8f96a79b-635c-320a-8932-c9c039d39b1c</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>434bfabb-0193-1000-0507-ed29208424e3</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>2418811b-0193-1000-cf44-33db74a3d9ce</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>631d89a3-0193-1000-4e50-07d7aa8f3eb0</id>
      <versionedComponentId>3fab39ca-3b87-3a12-a953-2f600e04b53b</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-2499-12a3-f16e-5c50cdca918e</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>631d1e5b-0193-1000-89d8-fe1332d84175</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>failure</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931006-ac12-12aa-029f-3a0a80438bd1</id>
      <versionedComponentId>3548bade-cb71-3b7d-89e4-ff6263013949</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931001-ac12-12aa-d6cb-9b12b5cee966</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931002-ac12-12aa-353a-c6c934e94c2d</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>620de7b6-0193-1000-2b37-7d918b919987</id>
      <versionedComponentId>3544ae4b-c402-3484-ada9-113f8af0ab43</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>620b1d25-0193-1000-894b-ceda08a2cff7</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>434bfabb-0193-1000-0507-ed29208424e3</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>transferId is present</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>2e363153-0193-1000-4f7e-e93aa5ba0a24</id>
      <versionedComponentId>3edf5a23-bed3-30f3-98d5-c8c49ebbbe0a</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>2e35ad1a-0193-1000-577c-3e72a0f49fcb</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>2e360734-0193-1000-c49b-9875fe7d5eab</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>48c55ee8-0193-1000-9e66-0d4e86014e30</id>
      <versionedComponentId>e1b954df-5dc3-3fc0-95af-12797635fc98</versionedComponentId>
      <name/>
      <bendPoints>
        <bendPoint x="4106.75439453125" y="987.8083724975586"/>
      </bendPoints>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>48ac69c4-0193-1000-df3e-40cf6b91f614</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>48acb1f5-0193-1000-6a5e-f44ca96dd478</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>failure</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>52a97b58-0193-1000-e6b3-745651fe5a8b</id>
      <versionedComponentId>4665bac7-c2db-39d6-87e2-8033d1b3fde0</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>52627e14-0193-1000-57c9-8596f6dc70f9</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>52a958a2-0193-1000-5703-d3220df91cac</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>failure</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>6215e37e-0193-1000-1555-8e3481adb0d7</id>
      <versionedComponentId>abf50838-e36b-304c-95f9-e47c4f8bb472</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>48ad85c2-0193-1000-744f-ad134b45b3f0</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>6215b646-0193-1000-e44a-81544bcef4c5</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931005-ac12-12aa-6425-e20b4c1f34d1</id>
      <versionedComponentId>85f280b4-c916-3c13-b946-274f7a7e6af7</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931003-ac12-12aa-b079-eac8f15e0ecf</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931001-ac12-12aa-d6cb-9b12b5cee966</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931004-e536-11de-b707-a3aa42da4901</id>
      <versionedComponentId>86423799-1203-3204-9684-1773dd1397b7</versionedComponentId>
      <name/>
      <bendPoints>
        <bendPoint x="717.9403076171875" y="1720.0"/>
      </bendPoints>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f5925f69-0192-1000-e4e5-06a1352474e8</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>ffed5b4f-0192-1000-bb53-ed1944fe4399</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>failure</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931002-84ad-1e36-bec0-e23c7e6d74ec</id>
      <versionedComponentId>1c695d45-0367-30d5-8d84-f98e195bef00</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-84ad-1e36-4085-a8919ceae988</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>52a32499-0193-1000-d558-6b2fa0cc4081</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931006-b646-1215-677d-e79d9a235c00</id>
      <versionedComponentId>e8467968-43da-35c4-9a1a-c611e4d77d68</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-b646-1215-8f81-ff6066c7de87</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931005-b646-1215-c5f5-7d55724a65d8</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>data is null</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931001-b646-1215-cbd3-55f28f2fc396</id>
      <versionedComponentId>a2deb80d-b26c-37f9-8d34-1519573c3be9</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>2e360734-0193-1000-c49b-9875fe7d5eab</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-b646-1215-8f81-ff6066c7de87</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>789e4361-0196-1000-3eb5-3d073a9428b2</id>
      <versionedComponentId>2a8dc3b6-b775-32d0-8fd4-b8ed5129bbaf</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>784d42fb-0196-1000-2130-f21a54b60bfb</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>789e22c8-0196-1000-6d1d-2caa2182f7a2</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>48af7415-0193-1000-5aa9-18186b5d3288</id>
      <versionedComponentId>27928c26-ed57-3ec5-8030-eaa525cd3dfb</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>48ac69c4-0193-1000-df3e-40cf6b91f614</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>48acb1f5-0193-1000-6a5e-f44ca96dd478</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61cba46a-0193-1000-9392-f5e243f387bd</id>
      <versionedComponentId>e103000e-6a44-3e31-bd3c-dd7caeb1691b</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-7e14-1262-1c8f-e4684eeee7ae</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-2499-12a3-f16e-5c50cdca918e</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61bf73a6-0193-1000-1b36-91d765d668c4</id>
      <versionedComponentId>0b711f50-c984-31ff-a4ae-d0241cfd64b9</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-5df8-18ad-e215-c8ec03074d12</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-7e14-1262-1c8f-e4684eeee7ae</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>0193100b-ac12-12aa-9c72-9af54d19f6e2</id>
      <versionedComponentId>4b356de4-6881-3afc-ab5d-56c4d27674bd</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-0734-1e36-7b30-0e608d8f5f13</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-ac12-12aa-7c8e-3180e1549684</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>f62b2083-0192-1000-74d4-74c4237d9bc4</id>
      <versionedComponentId>14af7fa7-82c6-31c8-a3e8-33ef162092c6</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f62b0876-0192-1000-abcd-11f2ad314d1c</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>f6243042-0192-1000-ca84-f115b36b1ba5</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>2a4dd633-0193-1000-c2a7-415648c8bcb8</id>
      <versionedComponentId>7f8910eb-1f47-3f67-ba86-ae647513b5fd</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f6fc58ee-0192-1000-a60b-f5335a92b47d</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>2a4db2cd-0193-1000-c5c0-1f946dff6dff</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>49303e4f-0193-1000-7272-fca401b4d868</id>
      <versionedComponentId>2872e0d9-387a-31f5-8397-fbc6428dfd28</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>48acb1f5-0193-1000-6a5e-f44ca96dd478</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>48ad85c2-0193-1000-744f-ad134b45b3f0</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>f6fc7819-0192-1000-a3bd-0112c31a0c19</id>
      <versionedComponentId>80ed049d-9b20-33b7-9586-6f71afab925f</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f629f74e-0192-1000-187c-ed063c434321</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>f6fc58ee-0192-1000-a60b-f5335a92b47d</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>split</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>f58feaab-0192-1000-40be-e56530deeadf</id>
      <versionedComponentId>f327ee4e-53e5-38d2-963a-9c950c5d6f7c</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f58d4e7c-0192-1000-5bf7-bd6192bed4fa</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>f58fd9cf-0192-1000-2c8d-4b913d14739c</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>f62a0f2e-0192-1000-71fd-21a8a7861f4c</id>
      <versionedComponentId>14e12984-6927-3e07-8295-8b8bce8f9686</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f6243042-0192-1000-ca84-f115b36b1ba5</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>f629f74e-0192-1000-187c-ed063c434321</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931004-b646-1215-d59f-cb26bf044fb7</id>
      <versionedComponentId>77bb8c68-0a57-3bde-8943-9d4006f66045</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-b646-1215-8f81-ff6066c7de87</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>52aaac12-0193-1000-5578-93118770a4af</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>data is not null</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>5265084a-0193-1000-ac3c-ef5914454de4</id>
      <versionedComponentId>97686262-95ed-30ae-b41a-9137621ba2d5</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>1</zIndex>
      <sourceId>52627e14-0193-1000-57c9-8596f6dc70f9</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>52a32499-0193-1000-d558-6b2fa0cc4081</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>624fb364-0193-1000-9dd4-c8ab61386580</id>
      <versionedComponentId>becb529d-58ce-3ac6-8bdb-4d1a2a2ba9f3</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>6215b646-0193-1000-e44a-81544bcef4c5</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>624f9e04-0193-1000-56f1-485b6f4cbf8b</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>data is null</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61bb0090-0193-1000-de79-4a2d8d8b678b</id>
      <versionedComponentId>4b606e7c-1f7d-3f41-b26c-b80b668556fc</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-69c4-18ac-5390-7fda5ef6f8fb</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-b1f5-18ac-e362-c547703d5f31</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61bd27de-0193-1000-fcb2-a468c782cccb</id>
      <versionedComponentId>8a29abfc-2004-3dc0-b051-3c3a0c3de9b1</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-85c2-18ad-c79f-2b1c5ec52765</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-5df8-18ad-e215-c8ec03074d12</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>620dccf4-0193-1000-ed62-5dfd8f200fc4</id>
      <versionedComponentId>073ca2d0-2a39-3217-886f-1774414b3d61</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>1ec8dcba-0193-1000-8911-62200bed212b</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>620b1d25-0193-1000-894b-ceda08a2cff7</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931008-ac12-12aa-b406-31fcab99ee3a</id>
      <versionedComponentId>6223a7ec-6393-34ce-a5cf-8663d0aa8d27</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931004-ac12-12aa-6624-a9bec3e58bf2</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-b2cd-1a4d-9973-b2157635765e</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>6245dc0b-0193-1000-d837-2082f43be189</id>
      <versionedComponentId>bfbd5c58-4f48-3117-b0ac-89c35732f8bc</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>52a32499-0193-1000-d558-6b2fa0cc4081</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>6245b3ab-0193-1000-cdb4-3265924892f4</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>failure</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>62528587-0193-1000-9902-701ca053d8df</id>
      <versionedComponentId>d292924f-e442-38a5-8653-a3084efeb45b</versionedComponentId>
      <name/>
      <bendPoints>
        <bendPoint x="2802.75439453125" y="2019.8083724975586"/>
      </bendPoints>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>52a32499-0193-1000-d558-6b2fa0cc4081</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>6245b3ab-0193-1000-cdb4-3265924892f4</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>7874ca65-0196-1000-5910-d02a1c4a8fbe</id>
      <versionedComponentId>db462136-9bcf-3c35-a6c4-07cd839da85c</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>f58fd9cf-0192-1000-2c8d-4b913d14739c</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>784d42fb-0196-1000-2130-f21a54b60bfb</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931004-84ad-1e36-4324-1e0f33df9cde</id>
      <versionedComponentId>f6d87c1a-66fd-3ae8-a0f8-82177f60f4fd</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>61dee536-0193-1000-6ed7-bdc5ae5e0bf3</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-84ad-1e36-4085-a8919ceae988</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>payee</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61e3c0fd-0193-1000-8771-f218139e067e</id>
      <versionedComponentId>593fb140-62ac-3605-bbef-21f0ac2eb372</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>52aaac12-0193-1000-5578-93118770a4af</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>61dee536-0193-1000-6ed7-bdc5ae5e0bf3</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>01931009-ac12-12aa-f365-6a368ef18628</id>
      <versionedComponentId>50e59497-a826-3712-968a-cc11aef2562f</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-b2cd-1a4d-9973-b2157635765e</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-ad1a-1e35-58b0-b886a20dbd54</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>0193100e-ac12-12aa-0f8c-df11cd5d3f64</id>
      <versionedComponentId>82a590bb-fd90-326c-9e92-4dc07b76d5ea</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-84ad-1e36-b5a9-b337e2bdb80c</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-2499-12a3-f16e-5c50cdca918e</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>0193100a-ac12-12aa-0df2-70435261cf35</id>
      <versionedComponentId>06d3cfea-0ecc-30b9-96b6-f14ad8c9bfe7</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-ad1a-1e35-58b0-b886a20dbd54</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-0734-1e36-7b30-0e608d8f5f13</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>47fe5060-0193-1000-b6c3-4ac2e3db9317</id>
      <versionedComponentId>1629c083-8879-31e5-8871-655b49405e75</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>2e3684ad-0193-1000-f478-ec93a5e19c23</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>52a32499-0193-1000-d558-6b2fa0cc4081</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61cc732d-0193-1000-29f3-293b9e9a0b6a</id>
      <versionedComponentId>f639dac3-d1bb-3474-81da-1f1c6e1b4463</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-7e14-1262-1c8f-e4684eeee7ae</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>61cbcaa7-0193-1000-9557-d4e4f8d844ff</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>failure</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>620e34ea-0193-1000-e94c-8800b3009df7</id>
      <versionedComponentId>f9d053b6-07cf-344c-b180-da5ff24899ef</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>620b1d25-0193-1000-894b-ceda08a2cff7</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>620e1f82-0193-1000-6795-03349b85274b</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>transferId not present</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61bc0ada-0193-1000-d25c-40c68da0d529</id>
      <versionedComponentId>521a4a5d-4340-30ae-b9e4-a2407f5daf0b</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-b1f5-18ac-e362-c547703d5f31</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-85c2-18ad-c79f-2b1c5ec52765</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>5264ef7b-0193-1000-7f2e-9c97338a982e</id>
      <versionedComponentId>08474408-0b6d-3cfb-b55c-9a40106a86a3</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>48ad5df8-0193-1000-e29e-a00ff55ae239</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>52627e14-0193-1000-57c9-8596f6dc70f9</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>success</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <connection>
      <id>61b9c886-0193-1000-7c49-c0ed0deae0a7</id>
      <versionedComponentId>5f2ac8c0-af90-3c0b-9b32-d13b3fb257b3</versionedComponentId>
      <name/>
      <bendPoints/>
      <labelIndex>1</labelIndex>
      <zIndex>0</zIndex>
      <sourceId>01931000-0734-1e36-7b30-0e608d8f5f13</sourceId>
      <sourceGroupId>e68af2b0-0192-1000-54e1-456745b78faf</sourceGroupId>
      <sourceType>PROCESSOR</sourceType>
      <destinationId>01931000-69c4-18ac-5390-7fda5ef6f8fb</destinationId>
      <destinationGroupId>e68af2b0-0192-1000-54e1-456745b78faf</destinationGroupId>
      <destinationType>PROCESSOR</destinationType>
      <relationship>matched</relationship>
      <maxWorkQueueSize>10000</maxWorkQueueSize>
      <maxWorkQueueDataSize>1 GB</maxWorkQueueDataSize>
      <flowFileExpiration>0 sec</flowFileExpiration>
      <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
      <partitioningAttribute/>
      <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
    </connection>
    <controllerService>
      <id>f588b330-0192-1000-c3c2-5b6de011724a</id>
      <versionedComponentId>c3096f1e-6c9a-3834-a366-41d106fbb21c</versionedComponentId>
      <name>mysql-central_ledger</name>
      <comment/>
      <bulletinLevel>WARN</bulletinLevel>
      <class>org.apache.nifi.dbcp.DBCPConnectionPool</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-dbcp-service-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <enabled>true</enabled>
      <property>
        <name>Database Connection URL</name>
        <value>jdbc:mysql://${REPORTING_DB_HOST}:${REPORTING_DB_PORT}/${REPORTING_DB_DATABASE}</value>
      </property>
      <property>
        <name>Database Driver Class Name</name>
        <value>com.mysql.cj.jdbc.Driver</value>
      </property>
      <property>
        <name>database-driver-locations</name>
      </property>
      <property>
        <name>kerberos-user-service</name>
      </property>
      <property>
        <name>kerberos-credentials-service</name>
      </property>
      <property>
        <name>kerberos-principal</name>
      </property>
      <property>
        <name>kerberos-password</name>
      </property>
      <property>
        <name>Database User</name>
        <value>${REPORTING_DB_USER}</value>
      </property>
      <property>
        <name>Password</name>
        <value>enc{b072ba21b636aefa7b5acf811d75fe879ee84284e448a33e9584c701193f340eafcbb3750a8bae7be9b1ac0c67b91e444163e6f8f92705fd}</value>
      </property>
      <property>
        <name>Max Wait Time</name>
        <value>500 millis</value>
      </property>
      <property>
        <name>Max Total Connections</name>
        <value>15</value>
      </property>
      <property>
        <name>Validation-query</name>
      </property>
      <property>
        <name>dbcp-min-idle-conns</name>
        <value>0</value>
      </property>
      <property>
        <name>dbcp-max-idle-conns</name>
        <value>8</value>
      </property>
      <property>
        <name>dbcp-max-conn-lifetime</name>
        <value>-1</value>
      </property>
      <property>
        <name>dbcp-time-between-eviction-runs</name>
        <value>-1</value>
      </property>
      <property>
        <name>dbcp-min-evictable-idle-time</name>
        <value>30 mins</value>
      </property>
      <property>
        <name>dbcp-soft-min-evictable-idle-time</name>
        <value>-1</value>
      </property>
    </controllerService>
    <controllerService>
      <id>f58ceb00-0192-1000-456c-dfb46e071bcc</id>
      <versionedComponentId>8803dbfb-bf9d-3b90-87f9-35689e49f340</versionedComponentId>
      <name>MongoDBControllerService</name>
      <comment/>
      <bulletinLevel>WARN</bulletinLevel>
      <class>org.apache.nifi.mongodb.MongoDBControllerService</class>
      <bundle>
        <group>org.apache.nifi</group>
        <artifact>nifi-mongodb-services-nar</artifact>
        <version>1.27.0</version>
      </bundle>
      <enabled>true</enabled>
      <property>
        <name>mongo-uri</name>
        <value>mongodb://${REPORTING_EVENTS_DB_HOST}:${REPORTING_EVENTS_DB_PORT}/?authSource=${REPORTING_EVENTS_DB_DATABASE}</value>
      </property>
      <property>
        <name>Database User</name>
        <value>${REPORTING_EVENTS_DB_USER}</value>
      </property>
      <property>
        <name>Password</name>
        <value>enc{bb9967aac1353eb47e42929fd85fc55ed67d022891cd3c6065d84c2f0bf7f6621d0d88d94ff86d3928e3e6881edea704a954658f83ab0b60a9f8}</value>
      </property>
      <property>
        <name>ssl-context-service</name>
      </property>
      <property>
        <name>ssl-client-auth</name>
        <value>REQUIRED</value>
      </property>
    </controllerService>
  </rootGroup>
  <controllerServices/>
  <reportingTasks/>
  <parameterProviders/>
</flowController>
